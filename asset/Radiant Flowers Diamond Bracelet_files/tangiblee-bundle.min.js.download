!function(){try{self.TrackJS=self.trackJs=function(e,t,n){"use awesome";var i=function(e,t){this.config=e,this.onError=t,e.enabled&&this.watch()};i.prototype={watch:function(){f.forEach(["EventTarget","Node","XMLHttpRequest"],function(t){f.has(e,t+".prototype.addEventListener")&&f.hasOwn(e[t].prototype,"addEventListener")&&this.wrapEventTarget(e[t].prototype)},this),this.wrapTimer("setTimeout"),this.wrapTimer("setInterval")},wrap:function(e){function t(){try{return e.apply(this,arguments)}catch(t){throw n.onError("catch",t,{bindTime:o,bindStack:a}),f.wrapError(t)}}var n=this;try{if(!f.isFunction(e)||f.hasOwn(e,"__trackjs__"))return e;if(f.hasOwn(e,"__trackjs_state__"))return e.__trackjs_state__}catch(i){return e}var o,a;if(n.config.bindStack)try{throw Error()}catch(i){a=i.stack,o=f.isoNow()}for(var r in e)f.hasOwn(e,r)&&(t[r]=e[r]);return t.prototype=e.prototype,t.__trackjs__=!0,e.__trackjs_state__=t},wrapEventTarget:function(e){var t=this;f.has(e,"addEventListener.call")&&f.has(e,"removeEventListener.call")&&(f.patch(e,"addEventListener",function(e){return function(n,i,o,a){try{f.has(i,"handleEvent")&&(i.handleEvent=t.wrap(i.handleEvent))}catch(r){}return e.call(this,n,t.wrap(i),o,a)}}),f.patch(e,"removeEventListener",function(e){return function(t,n,i,o){try{n=n&&(n.__trackjs_state__||n)}catch(a){}return e.call(this,t,n,i,o)}}))},wrapTimer:function(t){var n=this;f.patch(e,t,function(e){return function(t,i){var o=Array.prototype.slice.call(arguments),a=o[0];return f.isFunction(a)&&(o[0]=n.wrap(a)),f.has(e,"apply")?e.apply(this,o):e(o[0],o[1])}})}};var o=function(e){this.initCurrent(e)||console.warn("[TrackJS] invalid config")};o.prototype={current:{},initOnly:{application:!0,cookie:!0,enabled:!0,token:!0,callback:{enabled:!0},console:{enabled:!0},navigation:{enabled:!0},network:{enabled:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},defaults:{application:"",cookie:!1,dedupe:!0,dependencies:!0,enabled:!0,forwardingDomain:"",errorURL:"https://capture.trackjs.com/capture",errorNoSSLURL:"http://capture.trackjs.com/capture",faultURL:"https://usage.trackjs.com/fault.gif",usageURL:"https://usage.trackjs.com/usage.gif",onError:function(){return!0},serialize:function(e){function t(e){var t="<"+e.tagName.toLowerCase();e=e.attributes||[];for(var n=0;n<e.length;n++)t+=" "+e[n].name+'="'+e[n].value+'"';return t+">"}if(""===e)return"Empty String";if(e===n)return"undefined";if(f.isString(e)||f.isNumber(e)||f.isBoolean(e)||f.isFunction(e))return""+e;if(f.isElement(e))return t(e);if("symbol"==typeof e)return Symbol.prototype.toString.call(e);var i;try{i=JSON.stringify(e,function(e,i){return i===n?"undefined":f.isNumber(i)&&isNaN(i)?"NaN":f.isError(i)?{name:i.name,message:i.message,stack:i.stack}:f.isElement(i)?t(i):i})}catch(o){i="";for(var a in e)if(e.hasOwnProperty(a))try{i+=',"'+a+'":"'+e[a]+'"'}catch(r){}i=i?"{"+i.replace(",","")+"}":"Unserializable Object"}return i.replace(/"undefined"/g,"undefined").replace(/"NaN"/g,"NaN")},sessionId:"",token:"",userId:"",version:"",callback:{enabled:!0,bindStack:!1},console:{enabled:!0,display:!0,error:!0,warn:!1,watch:["log","debug","info","warn","error"]},navigation:{enabled:!0},network:{enabled:!0,error:!0,fetch:!0},visitor:{enabled:!0},window:{enabled:!0,promise:!0}},initCurrent:function(e){return this.removeEmpty(e),this.validate(e,this.defaults,"[TrackJS] config",{})?(this.current=f.defaultsDeep({},e,this.defaults),!0):(this.current=f.defaultsDeep({},this.defaults),!1)},setCurrent:function(e){return!!this.validate(e,this.defaults,"[TrackJS] config",this.initOnly)&&(this.current=f.defaultsDeep({},e,this.current),!0)},removeEmpty:function(e){for(var t in e)e.hasOwnProperty(t)&&e[t]===n&&delete e[t]},validate:function(e,t,n,i){var o=!0;n=n||"",i=i||{};for(var a in e)if(e.hasOwnProperty(a))if(t.hasOwnProperty(a)){var r=typeof t[a];r!==typeof e[a]?(console.warn(n+"."+a+": property must be type "+r+"."),o=!1):"[object Array]"!==Object.prototype.toString.call(e[a])||this.validateArray(e[a],t[a],n+"."+a)?"[object Object]"===Object.prototype.toString.call(e[a])?o=this.validate(e[a],t[a],n+"."+a,i[a]):i.hasOwnProperty(a)&&(console.warn(n+"."+a+": property cannot be set after load."),o=!1):o=!1}else console.warn(n+"."+a+": property not supported."),o=!1;return o},validateArray:function(e,t,n){var i=!0;n=n||"";for(var o=0;o<e.length;o++)f.contains(t,e[o])||(console.warn(n+"["+o+"]: invalid value: "+e[o]+"."),i=!1);return i}};var a=function(e,t,n,i,o,a,r){this.util=e,this.log=t,this.onError=n,this.onFault=i,this.serialize=o,r.enabled&&(a.console=this.wrapConsoleObject(a.console,r))};a.prototype={wrapConsoleObject:function(e,t){e=e||{};var n,i=e.log||function(){},o=this;for(n=0;n<t.watch.length;n++)(function(n){var a=e[n]||i;e[n]=function(){try{var i=Array.prototype.slice.call(arguments);if(o.log.add("c",{timestamp:o.util.isoNow(),severity:n,message:o.serialize(1===i.length?i[0]:i)}),t[n])if(f.isError(i[0])&&1===i.length)o.onError("console",i[0]);else try{throw Error(o.serialize(1===i.length?i[0]:i))}catch(r){o.onError("console",r)}t.display&&(o.util.hasFunction(a,"apply")?a.apply(e,i):a(i[0]))}catch(r){o.onFault(r)}}})(t.watch[n]);return e},report:function(){return this.log.all("c")}};var r=function(e,t,n,i,o){this.config=e,this.util=t,this.log=n,this.window=i,this.document=o,this.correlationId=this.token=null,this.initialize()};r.prototype={initialize:function(){this.token=this.getCustomerToken(),this.correlationId=this.getCorrelationId()},getCustomerToken:function(){if(this.config.current.token)return this.config.current.token;var e=this.document.getElementsByTagName("script");return e[e.length-1].getAttribute("data-token")},getCorrelationId:function(){var e;if(!this.config.current.cookie)return this.util.uuid();try{e=this.document.cookie.replace(/(?:(?:^|.*;\s*)TrackJS\s*\=\s*([^;]*).*$)|^.*$/,"$1"),e||(e=this.util.uuid(),this.document.cookie="TrackJS="+e+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")}catch(t){e=this.util.uuid()}return e},report:function(){return{application:this.config.current.application,correlationId:this.correlationId,sessionId:this.config.current.sessionId,token:this.token,userId:this.config.current.userId,version:this.config.current.version}}};var s=function(e){this.config=e,this.loadedOn=(new Date).getTime(),this.originalUrl=f.getLocation(),this.referrer=f.isBrowser?t.referrer:""};s.prototype={discoverDependencies:function(){var t={TrackJS:"3.10.1"};e.jQuery&&e.jQuery.fn&&e.jQuery.fn.jquery&&(t.jQuery=e.jQuery.fn.jquery),e.jQuery&&e.jQuery.ui&&e.jQuery.ui.version&&(t.jQueryUI=e.jQuery.ui.version),e.angular&&e.angular.version&&e.angular.version.full&&(t.angular=e.angular.version.full);for(var n in e)if("_trackJs"!==n&&"_trackJS"!==n&&"_trackjs"!==n&&"webkitStorageInfo"!==n&&"webkitIndexedDB"!==n&&"top"!==n&&"parent"!==n&&"frameElement"!==n)try{if(e[n]){var i=e[n].version||e[n].Version||e[n].VERSION;"string"==typeof i&&(t[n]=i)}}catch(o){}return t.TrackJS&&t.trackJs&&delete t.trackJs,t},report:function(){return{age:(new Date).getTime()-this.loadedOn,dependencies:this.config.current.dependencies?this.discoverDependencies():{trackJs:"3.10.1"},originalUrl:this.originalUrl,referrer:this.referrer,userAgent:e.navigator.userAgent,viewportHeight:f.isBrowser?e.document.documentElement.clientHeight:0,viewportWidth:f.isBrowser?e.document.documentElement.clientWidth:0}}};var c=function(e){this.util=e,this.appender=[],this.maxLength=30};c.prototype={all:function(e){var t,n,i=[];for(n=0;n<this.appender.length;n++)(t=this.appender[n])&&t.category===e&&i.push(t.value);return i},clear:function(){this.appender.length=0},truncate:function(){this.appender.length>this.maxLength&&(this.appender=this.appender.slice(Math.max(this.appender.length-this.maxLength,0)))},add:function(e,t){var n=this.util.uuid();return this.appender.push({key:n,category:e,value:t}),this.truncate(),n},get:function(e,t){var n,i;for(i=0;i<this.appender.length;i++)if(n=this.appender[i],n.category===e&&n.key===t)return n.value;return!1}};var l=function(e){var t={};return{addMetadata:function(e,n){t[e]=n},removeMetadata:function(e){delete t[e]},report:function(){var n,i=[];for(n in t)t.hasOwnProperty(n)&&i.push({key:n,value:e(t[n])});return i},store:t}},u=function(e,t){this.log=e,this.options=t,t.enabled&&this.watch()};u.prototype={isCompatible:function(t){return t=t||e,!f.has(t,"chrome.app.runtime")&&f.has(t,"addEventListener")&&f.has(t,"history.pushState")},record:function(e,t,n){this.log.add("h",{type:e,from:f.truncate(t,250),to:f.truncate(n,250),on:f.isoNow()})},report:function(){return this.log.all("h")},watch:function(){if(this.isCompatible()){var t=this,n=f.getLocationURL().relative;e.addEventListener("popstate",function(){var e=f.getLocationURL().relative;t.record("popState",n,e),n=e},!0),f.forEach(["pushState","replaceState"],function(e){f.patch(history,e,function(i){return function(){n=f.getLocationURL().relative;var o=i.apply(this,arguments),a=f.getLocationURL().relative;return t.record(e,n,a),n=a,o}})})}}};var d=function(e,t,n,i,o,a){this.util=e,this.log=t,this.onError=n,this.onFault=i,this.window=o,this.options=a,a.enabled&&this.initialize(o)};d.prototype={initialize:function(e){e.XMLHttpRequest&&this.util.hasFunction(e.XMLHttpRequest.prototype.open,"apply")&&this.watchNetworkObject(e.XMLHttpRequest),e.XDomainRequest&&this.util.hasFunction(e.XDomainRequest.prototype.open,"apply")&&this.watchNetworkObject(e.XDomainRequest),this.options.fetch&&f.isWrappableFunction(e.fetch)&&this.watchFetch()},escapeUrl:function(e){return(""+e).replace(/ /gi,"%20").replace(/\t/gi,"%09")},watchFetch:function(){var t=this,n=this.log,i=this.options,o=this.onError;f.patch(e,"fetch",function(a){return function(r,s){if(s&&s.__trackjs__)return a.apply(e,arguments);var c;try{throw Error()}catch(l){c=l.stack}var u=r instanceof Request?r.url:r,d=r instanceof Request?r.method:(s||{}).method||"GET",u=t.escapeUrl(u),g=a.apply(e,arguments);return g.__trackjs_state__=n.add("n",{type:"fetch",startedOn:f.isoNow(),method:d,url:f.truncate(u,2e3)}),g.then(function(e){var t=n.get("n",g.__trackjs_state__);if(t){f.defaults(t,{completedOn:f.isoNow(),statusCode:e.status,statusText:e.statusText});var a=e.headers.get("trackjs-correlation-id");a&&(t.requestCorrelationId=a),i.error&&400<=e.status&&(t=Error(t.statusCode+" : "+t.method+" "+t.url),t.stack=c,o("ajax",t))}return e})["catch"](function(e){e=e||{};var t=n.get("n",g.__trackjs_state__);throw t&&(f.defaults(t,{completedOn:f.isoNow(),statusCode:0,statusText:e.toString()}),i.error&&(o("ajax",{name:e.name,message:(e.message||"Failed")+": "+t.method+" "+t.url,stack:e.stack||c}),e.__trackjs_state__=!0)),e})}})},watchNetworkObject:function(e){var t=this,n=e.prototype.open,i=e.prototype.send;return e.prototype.open=function(e,i){var o=(i||"").toString();return 0>o.indexOf("localhost:0")&&(o=t.escapeUrl(o),this._trackJs={method:e,url:o}),n.apply(this,arguments)},e.prototype.send=function(){if(!this._trackJs)try{return i.apply(this,arguments)}catch(e){return void t.onError("ajax",e)}try{this._trackJs.logId=t.log.add("n",{type:"xhr",startedOn:t.util.isoNow(),method:this._trackJs.method,url:f.truncate(this._trackJs.url,2e3)}),t.listenForNetworkComplete(this)}catch(e){t.onFault(e)}return i.apply(this,arguments)},e},listenForNetworkComplete:function(e){var t=this;t.window.ProgressEvent&&e.addEventListener&&e.addEventListener("readystatechange",function(){4===e.readyState&&t.finalizeNetworkEvent(e)},!0),e.addEventListener?e.addEventListener("load",function(){t.finalizeNetworkEvent(e),t.checkNetworkFault(e)},!0):setTimeout(function(){try{var n=e.onload;e.onload=function(){t.finalizeNetworkEvent(e),t.checkNetworkFault(e),"function"==typeof n&&t.util.hasFunction(n,"apply")&&n.apply(e,arguments)};var i=e.onerror;e.onerror=function(){t.finalizeNetworkEvent(e),t.checkNetworkFault(e),"function"==typeof oldOnError&&i.apply(e,arguments)}}catch(o){t.onFault(o)}},0)},finalizeNetworkEvent:function(e){if(e._trackJs){var t=this.log.get("n",e._trackJs.logId);t&&(t.completedOn=this.util.isoNow(),e.getAllResponseHeaders&&e.getResponseHeader&&0<=(e.getAllResponseHeaders()||"").toLowerCase().indexOf("trackjs-correlation-id")&&(t.requestCorrelationId=e.getResponseHeader("trackjs-correlation-id")),t.statusCode=1223==e.status?204:e.status,t.statusText=1223==e.status?"No Content":e.statusText)}},checkNetworkFault:function(e){if(this.options.error&&400<=e.status&&1223!=e.status){var t=e._trackJs||{};this.onError("ajax",e.status+" : "+t.method+" "+t.url)}},report:function(){return this.log.all("n")}};var g=function(t,n){this.util=t,this.config=n,this.disabled=!1,this.throttleStats={attemptCount:0,throttledCount:0,lastAttempt:(new Date).getTime()},e.JSON&&e.JSON.stringify||(this.disabled=!0)};g.prototype={errorEndpoint:function(t){var n=this.config.current,i=n.errorURL;return f.isBrowser&&!f.testCrossdomainXhr()&&-1===e.location.protocol.indexOf("https")?i=n.errorNoSSLURL:n.forwardingDomain&&(i="https://"+n.forwardingDomain+"/capture"),i+"?token="+t+"&v=3.10.1"},usageEndpoint:function(e){var t=this.config.current,n=t.usageURL;return t.forwardingDomain&&(n="https://"+t.forwardingDomain+"/usage.gif"),this.appendObjectAsQuery(e,n)},trackerFaultEndpoint:function(e){var t=(this.config||{}).current||o.prototype.defaults,n=t.faultURL;return t.forwardingDomain&&(n="https://"+t.forwardingDomain+"/fault.gif"),this.appendObjectAsQuery(e,n)},appendObjectAsQuery:function(e,t){t+="?";for(var n in e)e.hasOwnProperty(n)&&(t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&");return t},getCORSRequest:function(t,n){var i;return this.util.testCrossdomainXhr()?(i=new e.XMLHttpRequest,i.open(t,n),i.setRequestHeader("Content-Type","text/plain")):"undefined"!=typeof e.XDomainRequest?(i=new e.XDomainRequest,i.open(t,n)):i=null,i},sendTrackerFault:function(e){this.throttle(e)||(f.isBrowser?t.createElement("img").src=this.trackerFaultEndpoint(e):fetch(this.trackerFaultEndpoint(e),{mode:"no-cors",__trackjs__:!0}))},sendUsage:function(e){f.isBrowser?t.createElement("img").src=this.usageEndpoint(e):fetch(this.usageEndpoint(e),{mode:"no-cors",__trackjs__:!0})},sendError:function(t,i){var o=this;if(!this.disabled&&!this.throttle(t))try{if(f.isBrowser){var a=this.getCORSRequest("POST",this.errorEndpoint(i));a.onreadystatechange=function(){4!==a.readyState||f.contains([200,202],a.status)||(o.disabled=!0)},a._trackJs=n,a.send(e.JSON.stringify(t))}else if(f.isWorker){var r={method:"POST",mode:"cors",body:e.JSON.stringify(t),__trackjs__:1};fetch(this.errorEndpoint(i),r).then(function(e){e.ok||(o.disabled=!0)})["catch"](function(e){o.disabled=!0})}}catch(s){throw this.disabled=!0,s}},throttle:function(e){var t=(new Date).getTime();if(this.throttleStats.attemptCount++,this.throttleStats.lastAttempt+1e3>=t){if(this.throttleStats.lastAttempt=t,10<this.throttleStats.attemptCount)return this.throttleStats.throttledCount++,!0}else e.throttled=this.throttleStats.throttledCount,this.throttleStats.attemptCount=0,this.throttleStats.lastAttempt=t,this.throttleStats.throttledCount=0;return!1}};var f=function(){function i(e,t,a,r){return a=a||!1,r=r||0,f.forEach(t,function(t){f.forEach(f.keys(t),function(s){null===t[s]||t[s]===n?e[s]=t[s]:a&&10>r&&"[object Object]"===o(t[s])?(e[s]=e[s]||{},i(e[s],[t[s]],a,r+1)):e.hasOwnProperty(s)||(e[s]=t[s])})}),e}function o(e){return Object.prototype.toString.call(e)}return{isBrowser:"undefined"!=typeof e&&"undefined"!=typeof e.document,isWorker:"object"==typeof self&&self.constructor&&0<=(self.constructor.name||"").indexOf("WorkerGlobalScope"),isNode:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,addEventListenerSafe:function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n)},afterDocumentLoad:function(e){if(f.isWorker)f.defer(e);else{var n=!1;"complete"===t.readyState?f.defer(e):(f.addEventListenerSafe(t,"readystatechange",function(){"complete"!==t.readyState||n||(f.defer(e),n=!0)}),setTimeout(function(){n||(f.defer(e),n=!0)},1e4))}},bind:function(e,t){return function(){return e.apply(t,Array.prototype.slice.call(arguments))}},contains:function(e,t){return 0<=e.indexOf(t)},defaults:function(e){return i(e,Array.prototype.slice.call(arguments,1),!1)},defaultsDeep:function(e){return i(e,Array.prototype.slice.call(arguments,1),!0)},defer:function(e,t){setTimeout(function(){e.apply(t)})},forEach:function(e,t,n){if(f.isArray(e)){if(e.forEach)return e.forEach(t,n);for(var i=0;i<e.length;)t.call(n,e[i],i,e),i++}},getLocation:function(){return e.location.toString().replace(/ /g,"%20")},getLocationURL:function(){return f.parseURL(f.getLocation())},has:function(e,t){try{for(var n=t.split("."),i=e,o=0;o<n.length;o++){if(!i[n[o]])return!1;i=i[n[o]]}return!0}catch(a){return!1}},hasFunction:function(e,t){try{return!!e[t]}catch(n){return!1}},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},isArray:function(e){return"[object Array]"===o(e)},isBoolean:function(e){return"boolean"==typeof e||f.isObject(e)&&"[object Boolean]"===o(e)},isBrowserIE:function(t){t=t||e.navigator.userAgent;var n=t.match(/Trident\/([\d.]+)/);return n&&"7.0"===n[1]?11:!!(t=t.match(/MSIE ([\d.]+)/))&&parseInt(t[1],10)},isBrowserSupported:function(){var e=this.isBrowserIE();return!e||8<=e},isError:function(e){if(!f.isObject(e))return!1;var t=o(e);return"[object Error]"===t||"[object DOMException]"===t||f.isString(e.name)&&f.isString(e.message)},isElement:function(e){return f.isObject(e)&&1===e.nodeType},isFunction:function(e){return!(!e||"function"!=typeof e)},isNumber:function(e){return"number"==typeof e||f.isObject(e)&&"[object Number]"===o(e)},isObject:function(e){return!(!e||"object"!=typeof e)},isString:function(e){return"string"==typeof e||!f.isArray(e)&&f.isObject(e)&&"[object String]"===o(e)},isWrappableFunction:function(e){return this.isFunction(e)&&this.hasFunction(e,"apply")},isoNow:function(){var e=new Date;return e.toISOString?e.toISOString():e.getUTCFullYear()+"-"+this.pad(e.getUTCMonth()+1)+"-"+this.pad(e.getUTCDate())+"T"+this.pad(e.getUTCHours())+":"+this.pad(e.getUTCMinutes())+":"+this.pad(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},keys:function(e){if(!f.isObject(e))return[];var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t);return n},noop:function(){},pad:function(e){return e=String(e),1===e.length&&(e="0"+e),e},parseURL:function(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return t?(t={protocol:t[2],host:t[4],path:t[5],query:t[6],hash:t[8]},t.origin=(t.protocol||"")+"://"+(t.host||""),t.relative=(t.path||"")+(t.query||"")+(t.hash||""),t.href=e,t):{}},patch:function(e,t,n){e[t]=n(e[t]||f.noop)},testCrossdomainXhr:function(){return f.isBrowser&&"withCredentials"in new XMLHttpRequest},truncate:function(e,t){if(e=""+e,e.length<=t)return e;var n=e.length-t;return e.substr(0,t)+"...{"+n+"}"},tryGet:function(e,t){try{return e[t]}catch(n){}},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},wrapError:function(e){var t=e||Object.prototype.toString.call(e);if(t&&t.innerError)return e;var n=Error("TrackJS Caught: "+(t.message||t));return n.description="TrackJS Caught: "+t.description,n.file=t.file,n.line=t.line||t.lineNumber,n.column=t.column||t.columnNumber,n.stack=t.stack,n.innerError=e,n}}}(),m=function(e,t,n,i,o,a){this.util=e,this.log=t,this.onError=n,this.onFault=i,this.options=a,this.document=o,e.isBrowser&&a.enabled&&this.initialize(o)};m.prototype={initialize:function(e){var t=this.util.bind(this.onDocumentClicked,this),n=this.util.bind(this.onInputChanged,this);e.addEventListener?(e.addEventListener("click",t,!0),e.addEventListener("blur",n,!0)):e.attachEvent&&(e.attachEvent("onclick",t),e.attachEvent("onfocusout",n))},onDocumentClicked:function(e){try{var t=this.getElementFromEvent(e);t&&t.tagName&&(this.isDescribedElement(t,"a")||this.isDescribedElement(t,"button")||this.isDescribedElement(t,"input",["button","submit"])?this.writeVisitorEvent(t,"click"):this.isDescribedElement(t,"input",["checkbox","radio"])&&this.writeVisitorEvent(t,"input",t.value,t.checked))}catch(n){this.onFault(n)}},onInputChanged:function(e){try{var t=this.getElementFromEvent(e);t&&t.tagName&&(this.isDescribedElement(t,"textarea")?this.writeVisitorEvent(t,"input",t.value):this.isDescribedElement(t,"select")&&t.options&&t.options.length?this.onSelectInputChanged(t):this.isDescribedElement(t,"input")&&!this.isDescribedElement(t,"input",["button","submit","hidden","checkbox","radio"])&&this.writeVisitorEvent(t,"input",t.value))}catch(n){this.onFault(n)}},onSelectInputChanged:function(e){if(e.multiple)for(var t=0;t<e.options.length;t++)e.options[t].selected&&this.writeVisitorEvent(e,"input",e.options[t].value);else 0<=e.selectedIndex&&e.options[e.selectedIndex]&&this.writeVisitorEvent(e,"input",e.options[e.selectedIndex].value)},writeVisitorEvent:function(e,t,i,o){"password"===this.getElementType(e)&&(i=n);var a=this.getElementAttributes(e);e.innerText&&(a.__trackjs_element_text=this.util.truncate(e.innerText,500)),this.log.add("v",{timestamp:this.util.isoNow(),action:t,element:{tag:e.tagName.toLowerCase(),attributes:a,value:this.getMetaValue(i,o)}})},getElementFromEvent:function(e){return e.target||t.elementFromPoint(e.clientX,e.clientY)},isDescribedElement:function(e,t,n){if(e.tagName.toLowerCase()!==t.toLowerCase())return!1;if(!n)return!0;for(e=this.getElementType(e),t=0;t<n.length;t++)if(n[t]===e)return!0;return!1},getElementType:function(e){return(e.getAttribute("type")||"").toLowerCase()},getElementAttributes:function(e){for(var t={},n=Math.min(e.attributes.length,10),i=0;i<n;i++){var o=e.attributes[i];f.contains(["data-value","value"],o.name.toLowerCase())||(t[o.name]=f.truncate(o.value,100))}return t},getMetaValue:function(e,t){return e===n?n:{length:e.length,pattern:this.matchInputPattern(e),checked:t}},matchInputPattern:function(e){return""===e?"empty":/^[a-z0-9!#$%&'*+=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/.test(e)?"email":/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(e)||/^(\d{4}[\/\-](0?[1-9]|1[012])[\/\-]0?[1-9]|[12][0-9]|3[01])$/.test(e)?"date":/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(e)?"usphone":/^\s*$/.test(e)?"whitespace":/^\d*$/.test(e)?"numeric":/^[a-zA-Z]*$/.test(e)?"alpha":/^[a-zA-Z0-9]*$/.test(e)?"alphanumeric":"characters"},report:function(){return this.log.all("v")}};var p=function(e,t,n,i,o){this.onError=e,this.onFault=t,this.serialize=n,o.enabled&&this.watchWindowErrors(i),o.promise&&this.watchPromiseErrors(i)};p.prototype={watchPromiseErrors:function(e){var t=this;e.addEventListener?e.addEventListener("unhandledrejection",function(e){try{e=e||{};var i=e.detail?f.tryGet(e.detail,"reason"):f.tryGet(e,"reason");if(i!==n&&null!==i&&!i.__trackjs_state__){if(!f.isError(i))try{throw Error(t.serialize(i))}catch(o){i=o}t.onError("promise",i)}}catch(o){t.onFault(o)}}):f.patch(e,"onunhandledrejection",function(e){return function(n){t.onError("promise",n),e.apply(this,arguments)}})},watchWindowErrors:function(e){var t=this;f.patch(e,"onerror",function(e){return function(n,i,o,a,r){try{if(f.isError(r))return t.onError("window",r),void e.apply(this,arguments);r=r||{};var s={message:r.message||t.serialize(n),name:r.name||"Error",line:r.line||parseInt(o,10)||null,column:r.column||parseInt(a,10)||null,stack:r.stack||null};"[object Event]"!==Object.prototype.toString.call(n)||i?s.file=r.file||t.serialize(i):s.file=(n.target||{}).src,t.onError("window",s)}catch(c){t.onFault(c)}e.apply(this,arguments)}})}};var v=function(){this.hasInstalled=!1,this.hasEnabled=!0,this.window=e,this.document=t,this.util=f,this.install=f.bind(this.install,this),this.onError=f.bind(this.onError,this),this.onFault=f.bind(this.onFault,this),this.serialize=f.bind(this.serialize,this),this.log=new c(f),this.metadata=new l(this.serialize);var n=e&&(e._trackJs||e._trackJS||e._trackjs);n&&this.install(n)};return v.prototype={install:function(e){try{if(f.isNode)return this.warn("monitoring disabled in node"),!1;if(!f.has(e,"token"))return this.warn("missing token"),!1;if(this.hasInstalled)return this.warn("already installed"),!1;if(this.config=new o(e),this.transmitter=new g(this.util,this.config),this.environment=new s(this.config),this.customer=new r(this.config,this.util,this.log,this.window,this.document),!this.config.current.enabled)return this.hasEnabled=!1;if(this.windowConsoleWatcher=new a(this.util,this.log,this.onError,this.onFault,this.serialize,this.window,this.config.current.console),!this.util.isBrowserSupported())return!1;this.callbackWatcher=new i(this.config.current.callback,this.onError,this.onFault),this.visitorWatcher=new m(this.util,this.log,this.onError,this.onFault,this.document,this.config.current.visitor),this.navigationWatcher=new u(this.log,this.config.current.navigation),this.networkWatcher=new d(this.util,this.log,this.onError,this.onFault,this.window,this.config.current.network),this.windowWatcher=new p(this.onError,this.onFault,this.serialize,this.window,this.config.current.window);var t=this;return f.afterDocumentLoad(function(){t.transmitter.sendUsage({token:t.customer.token,correlationId:t.customer.correlationId,application:t.config.current.application,x:t.util.uuid()})}),this.hasInstalled=!0}catch(n){return this.onFault(n),!1}},pub:function(){var e=this,t={addMetadata:this.metadata.addMetadata,attempt:function(t,n){try{var i=Array.prototype.slice.call(arguments,2);return t.apply(n||this,i)}catch(o){throw e.onError("catch",o),f.wrapError(o)}},configure:function(t){return!e.hasInstalled&&e.hasEnabled?(e.warn("agent must be installed"),!1):e.config.setCurrent(t)},hash:"fb090f9249a14e8440f317f57bd82ec8d6ea32a4",isInstalled:function(){return e.hasInstalled},install:this.install,removeMetadata:this.metadata.removeMetadata,track:function(t){if(!e.hasInstalled&&e.hasEnabled)e.warn("agent must be installed");else{var n=f.isError(t)?t.message:e.serialize(t);if(t=t||{},!t.stack)try{throw Error(n)}catch(i){t=i}e.onError("direct",t)}},version:"3.10.1",watch:function(t,n){return function(){try{var i=Array.prototype.slice.call(arguments,0);return t.apply(n||this,i)}catch(o){throw e.onError("catch",o),f.wrapError(o)}}},watchAll:function(e){var t,n=Array.prototype.slice.call(arguments,1);for(t in e)"function"!=typeof e[t]||f.contains(n,t)||(e[t]=this.watch(e[t],e));return e}};return new a(f,e.log,e.onError,e.onFault,e.serialize,t,o.prototype.defaults.console),t},onError:function(){var t,n=!1;return function(i,o,a){if(this.hasInstalled&&this.hasEnabled&&f.isBrowserSupported())try{if(a=a||{bindStack:null,bindTime:null,force:!1},o&&f.isError(o)||(o={name:"Error",message:this.serialize(o,a.force)}),-1===o.message.indexOf("TrackJS Caught"))if(n&&-1!==o.message.indexOf("Script error"))n=!1;else{var r=f.defaultsDeep({},{agentPlatform:f.isBrowser?"browser":"worker",bindStack:a.bindStack,bindTime:a.bindTime,column:o.column||o.columnNumber,console:this.windowConsoleWatcher.report(),customer:this.customer.report(),entry:i,environment:this.environment.report(),file:o.file||o.fileName,line:o.line||o.lineNumber,message:o.message,metadata:this.metadata.report(),nav:this.navigationWatcher.report(),network:this.networkWatcher.report(),url:(e.location||"").toString(),stack:o.stack,timestamp:this.util.isoNow(),visitor:this.visitorWatcher.report(),version:"3.10.1"});if(!a.force)try{if(!this.config.current.onError(r,o))return}catch(s){r.console.push({timestamp:this.util.isoNow(),severity:"error",message:s.message});var c=this;setTimeout(function(){c.onError("catch",s,{force:!0})},0)}if(this.config.current.dedupe){var l=(r.message+r.stack).substr(0,1e4);if(l===t)return;t=l}!function(){function e(){var e=0;return f.forEach(r.console,function(t){e+=(t.message||"").length}),8e4<=e}for(var t=0;e()&&t<r.console.length;)r.console[t].message=f.truncate(r.console[t].message,1e3),t++}(),this.log.clear(),setTimeout(function(){n=!1}),n=!0,this.transmitter.sendError(r,this.customer.token)}}catch(s){this.onFault(s)}}}(),onFault:function(e){var t=this.transmitter||new g;e=e||{},e={token:(this.customer||{}).token,file:e.file||e.fileName,msg:e.message||"unknown",stack:(e.stack||"unknown").substr(0,1e3),url:this.window.location,v:"3.10.1",h:"fb090f9249a14e8440f317f57bd82ec8d6ea32a4",x:this.util.uuid()},t.sendTrackerFault(e)},serialize:function(e,t){if(this.hasInstalled&&this.config.current.serialize&&!t)try{return this.config.current.serialize(e)}catch(n){this.onError("catch",n,{force:!0})}return o.prototype.defaults.serialize(e)},warn:function(t){f.has(e,"console.warn")&&e.console.warn("TrackJS: "+t)}},(new v).pub()}("undefined"==typeof self?void 0:self,"undefined"==typeof document?void 0:document),window.tangibleeAnalytics=window.tangibleeAnalytics||function(){(window.tangibleeAnalytics.q=window.tangibleeAnalytics.q||[]).push(arguments)};var e={hideThumb:!1,domain:"",activeLocale:document.documentElement.lang,useAnalyticsCookies:!0,useCookies:!0,doNotTrack:!1,trackingId:"",container:".tangiblee-modal-iframe-container",sideView:null,xlView:!1,xlModal:!1,setLayoutUx4:!1,preloaderDesign:"",spinnerColor:"",mobileToDesktopLayoutWidthThreshold:769,widgetVersion:"v3",showCTA:function(e,t){},hideCTA:function(){},SKUs:[],activeSKU:"",prevOpenedSKU:"",activePrice:"",activeSalePrice:"",activeCurrency:"",activeATC:"",qrCodeState:{image:"",show:!1,title:"",clickable:!0},analyticsPluginsIsSet:!1,isEmbed:!1,onCTAShown:function(){},onCtaClicked:function(){},onModalOpened:function(){},onStackOpened:function(){},onStackClosed:function(){},onCloseButtonClicked:function(){},onWidgetSwipedLeft:function(){},onWidgetSwipedRight:function(){},onIframeLoaded:function(){},onUserInteracted:function(){},onModalClosed:!1,onKeepAlive:!1,onBeforeATCClickInWidget:function(){},onATCClickInWidget:function(){},onWidgedRendered:function(){},isWidgetLoaded:!1,onIframeSrcChange:function(){},onCameraModeChange:function(){},onSKUsValidated:function(){},onProductUpdated:function(){},onNewItemStacked:function(){},onRequestItemsData:function(){},onProductVariationChanged:function(){},changePDPSelector:function(){},cachedProductVariations:{},currentProductVariations:{},onBatchATCReceived:function(){},onGoogleAnalyticsIsReady:function(){},iframe:{},modal:{},updateSKU:{},utils:{},validateSKUs:{},setCtaClickHandler:function(){var t,n=document.getElementsByClassName(e.ctaCssClass);if(!n.length)return!1;for(var i=!1,o=function(t){return!i&&(e.onCtaClicked(t),void(i=setTimeout(function(){"onCTAClick"===e.loadIframe&&(e.iframe.exists()?e.iframe.update():e.iframe.inject());var n=function(t){return"BODY"===t.tagName||t.classList.contains(e.ctaCssClass)?t:n(t.parentNode)},o=n(t.target).getAttribute("data-tng-alt");e.modal.show(e.modal.isUsed(),o),clearTimeout(i),i=!1},50)))},a=0;a<n.length;a++)t=n[a],e.utils.bindClickAndTouch(t,o,e.preventDefaultOnCtaClick,e.stopPropagationOnCtaClick,!0)},updateCTAAttributes:function(){var t=document.querySelectorAll("."+e.ctaCssClass);if(1===t.length){var n=t[0],i=n.getAttribute("role"),o=n.getAttribute("aria-label"),a=n.getAttribute("tabindex");"button"!==n.tagName.toLowerCase()&&(i||n.setAttribute("role","button"),a||n.setAttribute("tabindex","0")),o||n.setAttribute("aria-label","tangiblee cta")}},ctaCssClass:"tangiblee-cta",validSKUs:[],activateResizeInject:!1,isContainedId:!1,getContainedId:function(){var t;return!!e.isContainedId&&(t=[].find.call(e.validSKUs,function(t){return t.indexOf(e.activeSKU)>-1}))},useMultiVariations:!1,globaleConfig:!1,variationSKUs:[],isWishlistValidated:!1,wishlistSKUs:[],historySKUs:[],isVisibleProduct:!0,isArActive:!1,setSelectorsDisplay:function(t,n){var i=[".tangiblee-outside",".tng-select-wrapper"];
i.forEach(function(i){var o=document.querySelectorAll(i);o.length>0&&o.forEach(function(o){(n||e.isArActive||t)&&(o.style.display="none"),n||e.isArActive||(o.style.display=".tangiblee-outside"===i?"flex":"block")})})},onLandscapeChange:function(t){e.setSelectorsDisplay(!1,t)},features:[],isARAvailable:!1,LockValidation:!1,QMEnabled:!1,product:{},products:[],thumbs:[],getFaceDiameter:!1,getFaceDiameterDimensions:!1,loadIframe:"onCTAClick",logOn:!1,translations:[],preventDefaultOnCtaClick:!0,stopPropagationOnCtaClick:!0,useClickEventInsteadMousedown:!1,usePDPHistory:!1,maxPDPHistoryItems:10,skipCategoryInPDPHistory:!1,availableModes:[],categoryThumbsDefault:{},customIframeSrcAttributes:[],disableMobileScrollTop:!1,getHistoryBack:!0,getThumb:function(t){var n=e.thumbs[t||e.product.id],i=n&&n.indexOf("tangiblee-thumb")>-1;return i?e.categoryThumbsDefault[e.product.category]||e.categoryThumbsDefault["default"]||n:n},skipFrameSrcUpdate:!1,historyPushStateObj:{},setActiveSKUAttribute:function(e){var t=document.querySelector('script[src*="tangiblee-bundle.min.js"]')||document.querySelector('script[src*="tangiblee-app-mapper.js"]');t&&t.setAttribute("sku",e)},shouldForceWidgetOpen:function(){var t="1"===e.utils.getParam("tangiblee-opened")||"true"===e.utils.getParam("tangiblee-opened");return t},onForceWidgetOpen:function(e){this.shouldForceWidgetOpen()&&e&&tangiblee("setCustomIframeSrcAttributes",[{key:"forceArOpen",value:"1"}])},onForceWidgetClose:function(e){this.shouldForceWidgetOpen()&&e&&tangiblee("setCustomIframeSrcAttributes",[{key:"forceArOpen",value:"0"}])},setTangibleeParams:function(t){if(e.tangibleeGA3TrackingId=t.trackingIds&&t.trackingIds[0],e.analyticsSettings=t.analyticsSettings,e.translations=t.translations,e.products=t.products,e.isVisibleProduct=t.hide!==!0,e.thumbs=e.utils.renamePropsToLowerCase(t.cta_urls),e.features=t.features,e.contextModeCtaUrls=e.utils.renamePropsToLowerCase(t.contextModeCtaUrls||{}),e.isARAvailable=e.utils.validateFeatureFlag("AR Mode",e.features),e.LockValidation=e.utils.validateFeatureFlag("LockValidation",e.features),e.isViewIn2DContextDisabled=e.utils.validateFeatureFlag("ViewIn2DContextDisabled",e.features),e.QMEnabled=e.utils.validateFeatureFlag("QM Enabled",e.features),e.setLayoutUx4=e.utils.validateFeatureFlag("UX4",e.features),e.xlModal=e.utils.validateFeatureFlag("XL Gallery",e.features)||"1"===e.utils.getParam("xtng_xl_on"),e.setLayoutUx4&&e.utils.validateFeatureFlag("UX4",e.features).mobileToDesktopLayoutWidthThreshold&&(e.mobileToDesktopLayoutWidthThreshold=e.utils.validateFeatureFlag("UX4",e.features).mobileToDesktopLayoutWidthThreshold,window.innerWidth<e.mobileToDesktopLayoutWidthThreshold&&!e.sideView&&(e.sideView="right")),e.utils.validateFeatureFlag("Preloader Design",e.features)&&(e.preloaderDesign=e.utils.validateFeatureFlag("Preloader Design",e.features).design,e.spinnerColor=e.utils.validateFeatureFlag("Preloader Design",e.features).color,"loader3"===e.preloaderDesign&&t.logo)){var n=t.logo.slice(t.logo.lastIndexOf(".")+1);n&&(e.preloaderDesign="loader3="+n)}window.tangibleeAnalytics("setCurrentServerTime",t.currentTime)},trackHistory:function(){if(e.usePDPHistory&&e.validSKUs.indexOf(e.activeSKU)>-1){var t="TNG_PDP_HISTORY",n=e.utils.getFromLS(t);n||(n={});var i=e.products[e.activeSKU],o=e.skipCategoryInPDPHistory?0:i.parentCategoryId||i.categoryId;n[o]||(n[o]=[]);var a=[];a.push(e.activeSKU);for(var r=0;r<n[o].length&&!(a.length>=e.maxPDPHistoryItems);r++)n[o][r]!==e.activeSKU&&a.push(n[o][r]);e.historySKUs=a,n[o]=a,e.utils.saveToLS(t,n)}},trackJSInstalled:!1};!function(){e.promise="undefined"==typeof Promise?function(){"use strict";function e(e,t){g.add(e,t),d||(d=m(g.drain))}function t(e){var t,n=typeof e;return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function n(){for(var e=0;e<this.chain.length;e++)i(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function i(e,n,i){var o,a;try{n===!1?i.reject(e.msg):(o=n===!0?e.msg:n.call(void 0,e.msg),o===i.promise?i.reject(TypeError("Promise-chain cycle")):(a=t(o))?a.call(o,i.resolve,i.reject):i.resolve(o))}catch(r){i.reject(r)}}function o(i){var r,c=this;if(!c.triggered){c.triggered=!0,c.def&&(c=c.def);try{(r=t(i))?e(function(){var e=new s(c);try{r.call(i,function(){o.apply(e,arguments)},function(){a.apply(e,arguments)})}catch(t){a.call(e,t)}}):(c.msg=i,c.state=1,c.chain.length>0&&e(n,c))}catch(l){a.call(new s(c),l)}}}function a(t){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=t,i.state=2,i.chain.length>0&&e(n,i))}function r(e,t,n,i){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){n(o,e)},i)}(o)}function s(e){this.def=e,this.triggered=!1}function c(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(t){if("function"!=typeof t)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new c(this);this.then=function(t,o){var a={success:"function"!=typeof t||t,failure:"function"==typeof o&&o};return a.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");a.resolve=e,a.reject=t}),i.chain.push(a),0!==i.state&&e(n,i),a.promise},this["catch"]=function(e){return this.then(void 0,e)};try{t.call(void 0,function(e){o.call(i,e)},function(e){a.call(i,e)})}catch(r){a.call(i,r)}}var u,d,g,f=Object.prototype.toString,m="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),u=function(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:i!==!1})}}catch(p){u=function(e,t,n){return e[t]=n,e}}g=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,n,i;return{add:function(o,a){i=new e(o,a),n?n.next=i:t=i,n=i,i=void 0},drain:function(){var e=t;for(t=n=d=void 0;e;)e.fn.call(e.self),e=e.next}}}();var v=u({},"constructor",l,!1);return l.prototype=v,u(v,"__NPO__",0,!1),u(l,"resolve",function(e){var t=this;return e&&"object"==typeof e&&1===e.__NPO__?e:new t(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");t(e)})}),u(l,"reject",function(e){return new this(function(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");n(e)})}),u(l,"all",function(e){var t=this;return"[object Array]"!=f.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var o=e.length,a=Array(o),s=0;r(t,e,function(e,t){a[e]=t,++s===o&&n(a)},i)})}),u(l,"race",function(e){var t=this;return"[object Array]"!=f.call(e)?t.reject(TypeError("Not an array")):new t(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");r(t,e,function(e,t){n(t)},i)})}),l}():Promise}();var t=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2},n=function(){return window.navigator.userAgent.indexOf("CriOS")>=0},i=function(){return window.navigator.userAgent.indexOf("Safari")>-1&&window.navigator.userAgent.indexOf("Chrome")<=-1};e.utils.isItiOS=t()&&!window.MSStream,e.utils.isItChromeIOS=n(),e.utils.isItSafariDesktop=i(),e.utils.isItMobileOrTablet=function(){var e=navigator.userAgent;return e.match(/Android/i)||e.match(/BlackBerry/i)||e.match(/Opera Mini/i)||e.match(/IEMobile/i)||t()},e.utils.fireEvent=function(e,t){if(!e)return!1;var n;if(e.ownerDocument)n=e.ownerDocument;else{if(9!==e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);n=e}if(e.dispatchEvent){var i="";switch(t){case"click":case"mousedown":case"mouseup":i="MouseEvents";break;case"focus":case"change":case"blur":case"select":i="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+t+"'."}var o=n.createEvent(i);o.initEvent(t,!0,!0),o.synthetic=!0,e.dispatchEvent(o,!0)}},e.utils.bindClickAndTouch=function(t,n,i,o,a){function r(e){var i=t.getAttribute("data-last-event-handled");if(!i||"touch"===i){var o=f-d,a=m-g;Math.abs(o)<u&&Math.abs(a)<u&&n(e),t.setAttribute("data-last-event-handled","touch"),setTimeout(function(){t.setAttribute("data-last-event-handled","")},50)}}if(!t||t.getAttribute("data-click-and-touch-bound"))return!1;if(e.useClickEventInsteadMousedown)t.addEventListener("click",function(e){i&&e.preventDefault(),o&&e.stopPropagation();var r=t.getAttribute("data-last-event-handled");r&&"click"!==r&&"keydown"!==r||(a?n(e,!0):n(e),t.setAttribute("data-last-event-handled","click"))});else{var s,c=50;t.addEventListener("mousedown",function(e){s=e.clientX}),t.addEventListener("mouseup",function(e){var r=e.clientX;i&&e.preventDefault(),o&&e.stopPropagation();var l=t.getAttribute("data-last-event-handled");if(!l||"click"===l||"keydown"===l){var u=!0;e.button&&0!==e.button&&(u=!1),u&&Math.abs(r-s)<c&&(a?n(e,!0):n(e),t.setAttribute("data-last-event-handled","click"),setTimeout(function(){t.setAttribute("data-last-event-handled","")},50))}})}var l=window.innerWidth||document.body.clientWidth,u=Math.max(1,Math.floor(.01*l)),d=0,g=0,f=0,m=0,p=!1,v=function(){if(!p)try{var e=Object.defineProperty({},"passive",{get:function(){return p=!0,v}});window.addEventListener("test",null,e)}catch(t){}return!!p&&{passive:!1}};t.addEventListener("touchstart",function(e){d=e.changedTouches[0].screenX,g=e.changedTouches[0].screenY},v()),t.addEventListener("touchend",function(e){i&&e.cancelable&&e.preventDefault(),o&&e.stopPropagation(),f=e.changedTouches[0].screenX,m=e.changedTouches[0].screenY,r(e)}),a&&t.addEventListener("keydown",function(e){var a=e.code||e.key;"Enter"!==a&&"NumpadEnter"!==a&&"Space"!==a||(i&&e.preventDefault(),o&&e.stopPropagation(),n(e,!0),t.setAttribute("data-last-event-handled","keydown"),setTimeout(function(){t.setAttribute("data-last-event-handled","")},50))}),t.setAttribute("data-click-and-touch-bound","true")},e.utils.http={fetch:function(t,n,i){return new e.promise(function(e,o){try{var a=new XMLHttpRequest;a.open(n,t,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/json");var r=function(){a.readyState>3&&a.status>=200&&a.status<400&&e(a.responseText.length&&JSON.parse(a.responseText))};a.onreadystatechange=r,a.onerror=function(){o(a.statusText)},a.send(i),a.onreadystatechange!==r&&(a.onreadystatechange=r)}catch(s){o()}})},get:function(t){return new e.promise(function(e,n){try{var i=new XMLHttpRequest;i.open("GET",t,!0),i.setRequestHeader("Content-Type","application/json");var o=function(){i.readyState>3&&i.status>=200&&i.status<400&&e(i.responseText.length&&JSON.parse(i.responseText))};i.onreadystatechange=o,i.onerror=function(){n(i.statusText)},i.send(),i.onreadystatechange!==o&&(i.onreadystatechange=o)}catch(a){n()}})},post:function(t,n,i){return new e.promise(function(e,o){try{var a=new XMLHttpRequest;a.open("POST",t,!0),i&&a.setRequestHeader("Content-type",i);var r=function(){a.readyState>3&&a.status>=200&&a.status<400&&e(a.responseText)};a.onreadystatechange=r,a.onerror=function(){o(a.statusText)},a.send(n),a.onreadystatechange!==r&&(a.onreadystatechange=r)}catch(s){o()}})},jsonp:function(t){return new e.promise(function(e,n){try{window.tangibleeCallbackRegistry={};var i=function(e,t,n){function i(){o||(delete tangibleeCallbackRegistry[a],n(e))}var o=!1,a="cb"+String(Math.random()).slice(-6);e+=~e.indexOf("?")?"&":"?",e+="callback=tangibleeCallbackRegistry."+a,tangibleeCallbackRegistry[a]=function(e){o=!0,delete tangibleeCallbackRegistry[a],t(e)};var r=document.createElement("script");r.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=null,setTimeout(i,0))},r.onload=i,r.onerror=i,r.src=e,document.head.appendChild(r)},o=function(t){e(t)};i(t,o,r)}catch(a){var r=function(e){n("error request: "+e)}}})}},e.utils.isElementVisible=function(e){return e&&(null!==e.offsetParent||"fixed"===window.getComputedStyle(e).position)},e.utils.log=function(t){e.logOn&&console.log(t)},e.utils.createCustomEvent=function(e,t){if("function"==typeof window.CustomEvent)var n=new CustomEvent(e,{detail:t});else{var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!0,!0,t)}document.dispatchEvent(n)},e.utils.waitForConditionToMet=function(e,t){t=t||500;var n,i=0,o=function(){};return{then:function(a){return function r(){var s=!1;try{s=e()}catch(c){}s?(a(),"undefined"!=typeof n&&clearTimeout(n)):i++>t?(o(),"undefined"!=typeof n&&clearTimeout(n)):n=setTimeout(r,100)}(),{fail:function(e){o=e}}}}},e.utils.formatNumberWithCommas=function(e){var t,n,i=function(e){var t=/.*\d+.*/g;return t.test(e)};if(i(e))try{e=e.replace(/,/g,""),t=parseFloat(e).toFixed(2);var o=t.toString().split(".");o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n=o.join(".")}catch(a){}return n},e.utils.ready=function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},e.utils.getParam=function(e){var t=function(){for(var e,t,n,i={},o=window.location.search.substring(1).split("&"),a=0;a<o.length;a++)e=o[a],t=e.split("="),n={key:t[0],value:t[1]},n.key&&(i[n.key]=n.value||"");return i},n=t();return!!n[e]&&decodeURI(n[e])},e.utils.getCookie=function(e){var t,n,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t++){for(n=o[t];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(i))return n.substring(i.length,n.length)}return""},e.utils.setCookie=function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*(n||365)*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";path=/; Secure;"},e.utils.saveToLS=function(e,t){try{var n=t;"object"==typeof t&&(n=JSON.stringify(n)),window.localStorage.setItem(e,n)}catch(i){}},e.utils.getFromLS=function(e){try{var t=window.localStorage.getItem(e);t=JSON.parse(t)}catch(n){}return t},e.utils.hasClickedTargetSpecificClassName=function(e,t,n){if(e&&e.target&&t){n&&"string"==typeof n&&n.length||(n="body");for(var i,o=e.target,a=document.querySelector(n),r=document.querySelector("body");o&&!(i=o.classList.contains(t)?o:null)&&(o=o.parentNode,!o.isEqualNode(a)&&!o.isEqualNode(r)););return i}};var o=function(e){var t=/OS (\d+_\d+)/;if(t.test(e))return parseFloat(t.exec(e)[1].replace("_","."));var n=13;return n};e.utils.iosVersion=o,e.utils.browserNotSupportAR=function(){var t=e.utils.isItiOS&&/Version\/[\d.]+.*Safari/i.test(window.navigator.userAgent),n=e.utils.isItiOS&&o(window.navigator.userAgent)>=14.3;return e.utils.isItiOS&&!n&&!t};var a=function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1?"opera":navigator.userAgent.indexOf("Chrome")!==-1?"chrome":navigator.userAgent.indexOf("Safari")!==-1?"safari":navigator.userAgent.indexOf("Firefox")!==-1?"firefox":navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode==!0?"ie":null},r=function(t){return!t||(!(!e.utils.isItMobileOrTablet()||!t.mobile)||!(e.utils.isItMobileOrTablet()||!t.desktop))},c=function(e){if(!e)return!0;var t=a();return!t||(!(t in e)||(e[t]||!1))};e.utils.validateFeatureFlag=function(e,t){if(e in t){var n=t[e];if(null===n)return!0;try{var i=JSON.parse(n);return!!r(i.device)&&(!!c(i.browser)&&(i.data||!0))}catch(o){return!1}}return!1},e.utils.getPoweredByHref=function(){var t=(e.product.poweredbylink||"https://www.tangiblee.com/powered-by/tangiblee")+"?utm_campaign=PoweredBy&utm_source="+e.domain+"&utm_medium=app";return t},e.utils.renamePropsToLowerCase=function(e){for(var t,n=Object.keys(e),i=n.length,o={};i--;)t=n[i],o[t.toLowerCase()]=e[t];return o},e.utils.getWidgetUrlByPdpParam=function(){var t={prod:"widget",staging:"widget-staging",dev:"widget-dev",local:"https://localhost:3000/index.html"},n="https://cdn.tangiblee.com/$slot/index.html",i=e.utils.getParam("tng_w");if(i){if("local"===i)return t[i];if(!t[i])return n.replace("$slot","widget-poc/"+i);var o=n.replace("$slot",t[i]);return o}return null},e.validateSKUs=function(){if(e.SKUs.then)return e.SKUs.then(function(t){return e.validateSKUs(t)});if(e.SKUs.length&&e.SKUs[0]&&"string"==typeof e.SKUs[0]){var t="https://api.tangiblee.com/api/tngimpr?ids="+e.SKUs.join()+"&domain="+e.domain+"&activeLocale="+e.activeLocale+"&isContainedId="+(e.isContainedId?"true":"false");return e.utils.http.fetch(t,"GET")}return new e.promise(function(e,t){t({message:"Not correct SKUs format in _tangiblee.validateSKUs method"})})},e.validateAny=function(){if(e.SKUs.then)return e.SKUs.then(function(t){return e.validateAny(t)});if(e.SKUs.length&&e.SKUs[0]&&"string"==typeof e.SKUs[0]){var t="https://api.tangiblee.com/api/productvalidateany?ids="+e.SKUs.join()+"&domain="+e.domain;return e.utils.http.fetch(t,"GET")}return new e.promise(function(e,t){t({message:"Not correct SKUs format in _tangiblee.validateAny method"})})},e.validateSelectedSKUs=function(t){if(t&&t[0]&&"string"==typeof t[0]){var n="https://api.tangiblee.com/api/tngimpr?ids="+t.join()+"&domain="+e.domain+"&activeLocale="+e.activeLocale;return e.utils.http.fetch(n,"GET")}return new e.promise(function(e,t){t({message:"Not correct SKUs format in _tangiblee.validateSelectedSKUs method"})})},e.updateSku=function(){if(e.validSKUs.length){e.setActiveSKUAttribute(e.activeSKU);var t=e.product?e.product.id:null;if(e.product=e.products[e.activeSKU],window.tangibleeAnalytics("setProduct",e.product),t===e.activeSKU)return;if(e.validSKUs.indexOf(e.activeSKU)>-1){var n=e.showCTA(e.activeSKU,e.getThumb());n&&n.then?n.then(function(t){e.ctaCssClass=t,e.setCtaClickHandler()}):(e.ctaCssClass=n,e.setCtaClickHandler()),e.trackHistory(),window.tangibleeAnalytics("trackImpression",[e.activeSKU]),e.iframe.exists()&&e.iframe.update()}else e.hideCTA(e.activeSKU),e.modal.close(e.modal.isUsed())}},function(){function t(e){e.preventDefault()}function n(){document.documentElement.style.setProperty("--window-inner-height",window.innerHeight+"px")}var i=function(){var t=function(){var t=window.screen.width,n=window.screen.height,i=window.devicePixelRatio;if(window.innerHeight>window.innerWidth&&e.utils.isItiOS&&i>=2){if(375===t&&667===n)return 547;if(414===t&&736===n)return 618;if(375===t&&812===n)return 629;if(414===t&&896===n)return 714;if(390===t&&844===n)return 658;if(320===t&&568===n)return 448;if(428===t&&926===n)return 740;if(768===t&&1024===n)return 950}return!1};return"v2"===e.widgetVersion?Math.round(.92*window.innerHeight):t()!==!1?t():null!==e.sideView?window.innerHeight:window.innerHeight-10},o=function(){var t;return t=window.innerWidth<1024&&e.utils.isItiOS||null!==e.sideView?window.innerWidth:window.innerWidth-10,"v2"===e.widgetVersion&&(t=window.innerWidth-10),t},a=function(){var t=document.getElementsByClassName("tangiblee-modal-content")[0];t.style.width=o()+"px",t.style.height=i()+"px",e.utils.isItiOS&&e.utils.iosVersion(navigator.userAgent)>=15&&!e.utils.isItChromeIOS&&(t.style.height="calc(100% - 5px)"),(null!==e.sideView||e.setLayoutUx4)&&(t.style.width="100%")},r=function(){var t=document.getElementsByClassName("tangiblee-modal-content")[0];if("v2"===e.widgetVersion)return t.style.width="800px",void(t.style.height="610px");if(e.xlModal){var n=function(){var e,t=1.78,n=window.innerWidth,i=window.innerHeight;if(e=n>=2560?{width:1574,height:885}:n>=950&&n<=1023?{width:889,height:500}:n>=1483&&n<=2559?{width:1422,height:800}:n>=850&&n<=949||n>=1024&&n<=1482?{width:n-60,height:Math.round((n-60)/t)}:n>=1024&&n<=1482||n>=783&&n<=849?{width:n,height:Math.round(n/t)}:{width:n,height:i},e.height+30>=i){var o=e.height-i,a=Math.round(e.height-o-30),r=Math.round(a*t);e={width:r,height:a}}return e};return t.style.width="100%",t.style.height="100%",t.style.maxWidth=n().width+"px",void(t.style.maxHeight=n().height+"px")}if(e.xlView){var i=1.46,o=878,a=window.innerWidth<o?Math.min(window.innerHeight,window.innerWidth/i)+"px":"601px";return t.style.width="100%",t.style.height="100%",t.style.maxWidth=o+"px",void(t.style.maxHeight=a)}if(null!==e.sideView)return t.style.width="100%",t.style.maxWidth=window.innerHeight>1080&&window.innerWidth>1920?"1000px":"600px",void(t.style.height="100%");if(e.setLayoutUx4){var r=[{width:e.mobileToDesktopLayoutWidthThreshold,height:610},{width:630,height:800}],n=function(){for(var e=300,t=r[0],n=1;n<r.length;n++)window.innerHeight>t.height+e&&r[n].height>t.height&&(t=r[n]);return t};if(t.style.width="100%",t.style.maxWidth=n().width+"px",t.style.height="100%",t.style.maxHeight=n().height+"px",t.style.aspectRatio="auto",window.innerHeight>730&&window.innerHeight<910&&window.innerWidth>770){var s=Math.round(window.innerHeight-30);t.style.maxHeight=s+"px",t.style.maxWidth=Math.round(.78*s)+"px"}}else{var c=e.utils.isItMobileOrTablet(),l=c?768:980,u=c?900:610;t.style.width=Math.min(window.innerWidth-120,l)+"px",t.style.height=Math.min(window.innerHeight-120,u)+"px"}},s=function(){if(!e.setLayoutUx4){var t=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a"),i=document.createElement("div");n.id="tng-btn-close-modal",n.href="javascript:void(0)",n.rel="modal:tng-close",n.className="tng-close-modal",n.title="Close Tangiblee Popup",n.style.position=i.style.position="absolute",n.style.display="block",n.style.zIndex="2",n.style.cursor="pointer",n.setAttribute("tabindex","-1"),"v2"===e.widgetVersion?(n.style.backgroundImage="url(//cdn.tangiblee.com/tangiblee-static/shared/lib/jquery.modal/tng_close@2x.png)",n.style.backgroundSize="18px 18px",n.style.backgroundPosition="center center",n.style.backgroundColor="#f9f9f9",n.style.backgroundRepeat="no-repeat",n.style.top=i.style.top="5px",n.style.right=i.style.right="5px",n.style.width=i.style.width="32px",n.style.height=i.style.height="32px"):(n.style.backgroundImage="url(https://cdn.tangiblee.com/tangiblee-static-img/close-mobile.svg)",n.style.backgroundSize="18px 18px",n.style.backgroundColor="rgba(0,0,0,0.05)",n.style.backgroundPosition="8px 8px",n.style.backgroundRepeat="no-repeat",n.style.top=i.style.top="0",n.style.right=i.style.right="0",n.style.width=i.style.width="40px",n.style.height=i.style.height="35px",null!==e.sideView&&(n.style.right=i.style.right="0px",n.style.top=i.style.top="0px")),i.id="tng-btn-close-modal__focusable",i.setAttribute("role","button"),i.setAttribute("tabindex","0"),t.appendChild(i),t.appendChild(n)}},c=function(){if(!e.setLayoutUx4){var t=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a"),i=document.createElement("div");n.id="tng-btn-close-modal",n.href="javascript:void(0)",n.rel="modal:tng-close",n.className="tng-close-modal",n.title="Close Tangiblee Popup",n.style.backgroundImage="url(https://cdn.tangiblee.com/tangiblee-static-img/close-x.svg)",n.style.backgroundSize="26px 28px",n.style.backgroundRepeat="no-repeat",n.style.position=i.style.position="absolute",n.style.top=i.style.top="0px",n.style.right=i.style.right="-42px",n.style.display=i.style.display="block",n.style.width=i.style.width="26px",n.style.height=i.style.height="28px",n.style.zIndex="2",n.setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),i.id="tng-btn-close-modal__focusable",i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.setAttribute("aria-label","Close Tangiblee modal"),null!==e.sideView&&(n.style.right=i.style.right="5px",n.style.top=i.style.top="5px"),t.appendChild(i),t.appendChild(n)}},l=function(){if(!e.setLayoutUx4){var t=document.createElement("div"),n=document.createElement("a");t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.width=n.style.width="155px",t.style.height=n.style.height="35px",n.id="tng-logo__focusable",n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.zIndex="-1",n.setAttribute("role","button"),n.setAttribute("tabindex","0"),n.setAttribute("rel","nofollow"),n.setAttribute("aria-label","Powered By Tangiblee");var i=document.createElement("a");i.id="tng-logo-wrapper",i.href=n.href=e.utils.getPoweredByHref(),i.rel=n.rel="nofollow noopener",i.target=n.target="_blank",i.style.display="flex",i.style.alignItems="center",i.style.width="155px",i.style.position="relative",i.setAttribute("tabindex","-1"),i.setAttribute("rel","nofollow"),null!==e.sideView&&(i.style.position="absolute",i.style.left="0px",i.style.top="0px"),"v2"===e.widgetVersion?(t.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal.svg")',i.style.position="absolute",i.style.bottom="12px",i.style.left="2px",i.style.zIndex="10"):t.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal-inverted.svg")',i.appendChild(n),i.appendChild(t),document.getElementsByClassName("tangiblee-modal-content")[0].appendChild(i)}},u=function(){if(!e.setLayoutUx4&&"v3"===e.widgetVersion){var t=document.createElement("a"),n=document.createElement("a");t.style.backgroundImage='url("//cdn.tangiblee.com/tangiblee-static-img/powered-by-full-logo-horizontal-inverted.svg")',t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center",t.style.display="inline-block",t.rel=n.rel="nofollow noopener",t.href=n.href=e.utils.getPoweredByHref(),t.target=n.target="_blank",t.style.width=n.style.width="150px",t.style.height=n.style.height="35px",t.id="tng-logo-link",t.setAttribute("tabindex","-1"),n.setAttribute("rel","nofollow"),n.id="tng-logo__focusable",n.style.position="absolute",n.style.top="0",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.zIndex="-1",n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("rel","nofollow");var i=document.createElement("div");i.id="tng-logo-wrapper",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.position="relative",null!==e.sideView&&(i.style.position="absolute",i.style.top="0",i.style.right="0",i.style.width="100%",i.style.justifyContent="flex-start"),i.appendChild(n),i.appendChild(t);var o=document.getElementsByClassName("tangiblee-modal-iframe-container")[0];document.getElementsByClassName("tangiblee-modal-content")[0].insertBefore(i,o)}},d=function(){if(e.qrCodeState.clickable){var t={type:"open_qr"};e.iframe.messaging.postMessageToIframe(JSON.stringify(t)),e.qrCodeState.show=!1,g()}},g=function(){if(!e.xlModal&&e.setLayoutUx4&&e.qrCodeState.image){var t="tangiblee-qr-code",n="tangiblee-qr-code__qr",i="tangiblee-qr-code__title",o="tangiblee-qr-code__gif-container",a="tangiblee-qr-code__gif-container--active",r="tangiblee-qr-code__gif",s=document.querySelector("."+t),c=document.querySelector("."+n),l=document.querySelector("."+i),u=document.querySelector("."+o),g=document.querySelector("."+r);if(!s){s=document.createElement("div"),c=document.createElement("img"),l=document.createElement("div"),u=document.createElement("div"),g=document.createElement("img"),u.appendChild(g),s.appendChild(c),s.appendChild(l),s.appendChild(u);var f=document.getElementsByClassName("tangiblee-modal-content")[0];if(f){var m=function(t){return function(){g.src&&(t?(u.style.height="75px",u.classList.add(a)):e.qrCodeState.hideTimerGif||(u.style.height="0px",u.classList.remove(a)))}};f.appendChild(s),e.utils.bindClickAndTouch(s,d),s.addEventListener("mouseenter",m(!0)),s.addEventListener("mouseleave",m(!1))}}s.classList.add(t);var p="background:rgba(255, 255, 255, 0.64);position:absolute;z-index:10;padding:10px;transition:0.6s;border-radius:10px;text-align:center;font-size:12px;line-height:normal;font-weight:500;"+("right"===e.sideView?"top:10px;right:calc(100% + 10px);":"top:0;left:calc(100% + 10px);");s.setAttribute("style",p),s.style.opacity=e.qrCodeState.show?"1":"0",s.style.transform=e.qrCodeState.show?"translate(0%, 0%)":"translate(0px, -130%)",s.style.width=window.screen.width<840?"112px":"148px",c.classList.add(n),c.setAttribute("style","display:block;width:100%;margin: 0 0 10px 0;"),c.setAttribute("src",e.qrCodeState.image),l.classList.add(i),l.innerHTML=e.qrCodeState.title,g.setAttribute("style","display: inline-block;width: auto; height: 100%;"),g.classList.add(r),u.setAttribute("style","transition: 0.5s; overflow: hidden;"),u.classList.add(o),u.classList.contains(a)?u.style.height="75px":u.style.height="0px";var v=2,h=500,y=5e3,w=4900*v-h,b="https://cdn.tangiblee.com/tangiblee-static-img/qr-code-scan.gif",k=e.qrCodeState,C=function(e){return setTimeout(function(){u&&k.show&&(k.showTimerGif=null,g.setAttribute("src",b),u.style.height="75px",u.classList.add(a))},e)},I=function(e){return setTimeout(function(){u&&k.show&&(k.hideTimerGif=null,u.style.height="0px",u.classList.remove(a))},e)};k.show&&(g.src||(k.showTimerGif&&clearTimeout(k.showTimerGif),k.hideTimerGif&&clearTimeout(k.hideTimerGif),k.showTimerGif=C(y),k.hideTimerGif=I(y+w)))}},f=function(){if("v3"===e.widgetVersion){var t=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a");n.id="tng-first-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.left=0,n.setAttribute("aria-hidden",!0),n.addEventListener("focusin",function(){var e=document.getElementById("tangiblee_iframe");e&&e.focus()});var i=t&&t.children[0];t.insertBefore(n,i)}},m=function(){if("v3"===e.widgetVersion){var t=document.getElementsByClassName("tangiblee-modal-content")[0],n=document.createElement("a");n.id="tng-last-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.right=0,n.setAttribute("aria-hidden",!0),n.addEventListener("focusin",function(){var e=document.getElementById("tangiblee_iframe");e&&e.focus()}),t.appendChild(n)}},p=function(){document.getElementById("tng-btn-close-modal")&&document.getElementById("tng-btn-close-modal").remove(),document.getElementById("tng-btn-close-modal__focusable")&&document.getElementById("tng-btn-close-modal__focusable").remove(),document.getElementById("tng-logo-wrapper")&&document.getElementById("tng-logo-wrapper").remove(),document.getElementById("tng-logo__focusable")&&document.getElementById("tng-logo__focusable").remove(),document.getElementById("tng-first-focusable-el")&&document.getElementById("tng-first-focusable-el").remove(),document.getElementById("tng-last-focusable-el")&&document.getElementById("tng-last-focusable-el").remove(),document.getElementsByClassName("tangiblee-atc")[0]&&document.getElementsByClassName("tangiblee-atc")[0].remove()},v=function(t){var n=document.getElementsByClassName("tangiblee-modal-content")[0];if(n){window.innerWidth<e.mobileToDesktopLayoutWidthThreshold?(a(),f(),u(),s(),m(),g(),n.style.position="absolute",e.utils.isItiOS?(n.style.top="0px",n.style.left="0px"):(n.style.top="5px",n.style.left="5px"),"v2"===e.widgetVersion&&(n.style.top="5px",n.style.left="5px"),"right"===e.sideView&&(n.style.top="0","right"===e.sideView?n.style.right="0":n.style.left="0","right"===e.sideView?n.style.left="":n.style.right="")):(r(),f(),g(),l(),c(),m(),null!==e.sideView?(n.style.position="absolute",n.style.top="0","right"===e.sideView?(n.style.right="0",n.style.left=""):"left"===e.sideView&&(n.style.left="0",n.style.right="")):(n.style.position="relative",n.style.top="0",n.style.left="0"));var i=document.getElementById("tng-logo-wrapper");e.utils.bindClickAndTouch(i,function(){},!1,!0,!1);var o=document.getElementById("tng-btn-close-modal");e.utils.bindClickAndTouch(o,e.modal.close,!0,!0,!1);var d=document.getElementById("tng-logo__focusable");e.utils.bindClickAndTouch(d,function(){},!1,!0,!0);var p=document.getElementById("tng-btn-close-modal__focusable");e.utils.bindClickAndTouch(p,e.modal.close,!0,!0,!0)}},h=function(){var t=navigator.userAgent.match(/iPhone/i);if(t){var n=!1;window.addEventListener("orientationchange",function(){n||(n=setTimeout(function(){e.validSKUs.indexOf(e.activeSKU)>-1&&(p(),v(),e.showCTA(e.activeSKU,e.getThumb()),clearTimeout(n),n=!1)},250))})}else{var i=!1;window.addEventListener("resize",function(){i||(i=setTimeout(function(){e.validSKUs.indexOf(e.activeSKU)>-1&&(p(),
v(),e.showCTA(e.activeSKU,e.getThumb()),clearTimeout(i),i=!1)},250))})}},y=function(){v(!0),h()},w=function(){if("v2"===e.widgetVersion)return window.innerWidth<=768?"position: absolute; top: 5px; left: 5px; background:#fff;width:100%;height:100%;":"position: relative; background:#fff;width:100%;height:100%;";if(null!==e.sideView){var t="left"===e.sideView?"left: 0px; transform: translateX(-100%);":"right: 0px; transform: translateX(100%);";return"position: absolute; top: 0px; "+t+" transition: transform 0.4s; width:100%; height:"+(e.setLayoutUx4?i()+"px":"calc(100% - 35px);")}return e.setLayoutUx4?window.innerWidth<e.mobileToDesktopLayoutWidthThreshold?"position: absolute; top: 5px; left: 5px;width:100%;height: "+i()+"px;":"position: relative;width:100%;height:100%;":window.innerWidth<=768?"position: absolute; top: 5px; left: 5px;width:100%;height:calc(100% - 35px);":"position: relative;width:100%;height:calc(100% - 35px);"},b=function(){var t;return t="v2"===e.widgetVersion?"display: flex!important; justify-content: center; align-items: center; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;":null!==e.sideView?"position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;":"display: flex!important; justify-content: center; align-items: center; position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 2147483647; touch-action: none; transform: translate(-100%,-100%) translateZ(0); will-change: transform;"};e.modal.updateQr=function(){g()},e.modal.isUsed=function(){return".tangiblee-modal-iframe-container"===e.container},e.modal.inject=function(){var t,n=w(),i=b();"v2"===e.widgetVersion&&(t='<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'"><div class="tangiblee-modal-iframe-container" style="width:100%;height:calc(100%);"></div></div></div>'),t=null!==e.sideView?'<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'">'+(e.setLayoutUx4?"":'<div class="tangiblee-head" style="position: absolute;top: 0;left: 0;width: 100%; height: 38px; background: rgba(0,0,0,0.9);"></div>')+'<div class="tangiblee-modal-iframe-container" style="width:100%;height:100%;'+(e.setLayoutUx4?"":"padding-top:38px;")+'box-sizing: border-box;"></div></div></div>':'<div class="tangiblee-modal-overlay tng-disable-scrolling" style="'+i+'"><div class="tangiblee-modal-content" style="'+n+'">'+(e.utils.isItiOS&&window.innerWidth<=768?'<div class="tangiblee-modal-bg" style="background:white;position:absolute;top:35px;left:5px;width:calc(100% - 10px);z-index: -1;height:calc(100% - 35px);"></div>':"")+'<div class="tangiblee-modal-iframe-container" style="width:100%;height:'+(e.setLayoutUx4?"100%;":"calc(100% - 35px);")+'"></div></div></div>',document.head.insertAdjacentHTML("beforeend","<style>#tng-logo-wrapper:focus, #tng-btn-close-modal:focus {outline: none; box-shadow: none;} #tng-logo__focusable:focus, #tng-btn-close-modal__focusable:focus {outline: 2px solid #65d594;}"+(e.utils.isItiOS&&768===window.innerWidth?"@media (max-width: 770px) and (min-width: 767px) and (orientation: portrait) {.tangiblee-modal-content{height: calc(100% - 10px) !important;}}":"")+"</style>"),document.body.insertAdjacentHTML("beforeend",t);var o=document.getElementsByClassName("tangiblee-modal-overlay")[0];o&&(setTimeout(function(){e.utils.bindClickAndTouch(o,function(t){t.target===o&&e.modal.close(e.modal.isUsed())},!0,!0)},1e3),o.onkeydown=function(t){27==t.keyCode&&e.modal.close(e.modal.isUsed(),!0)},y())},e.openedProducts=[],e.isCurrentArRingMode=!1;var k=function(t){e.modal.close(e.modal.isUsed(),!1,!0)},C=(e.utils.isItiOS&&e.utils.iosVersion(navigator.userAgent)>=15,function(){var e={},t=window.innerWidth-document.documentElement.offsetWidth;return{lock:function(n){if(n){e[n.tagName]={position:n.style.position,"box-sizing":n.style.boxSizing,height:n.style.height,overflow:n.style.overflow,width:n.style.width,"padding-right":n.style.paddingRight,left:n.style.left,right:n.style.right,margin:n.style.margin};var i=n.getAttribute("style");n.setAttribute("style",(i||"")+"position: absolute!important; box-sizing:border-box!important; width: 100%!important; height: auto!important; overflow: hidden!important;  padding-right:"+t+"px !important; left: 0!important; right: 0!important; margin: auto !important;")}},unlock:function(t){if(t&&e[t.tagName]){for(var n=Object.keys(e[t.tagName]),i=0;i<n.length;i++)""!==n[i]?t.style.setProperty(n[i],e[t.tagName][n[i]]):t.style.removeProperty(n[i]);e[t.tagName]}}}}()),I=function(){var e=0,t="window";return{savePosition:function(){document.body.scrollTop?(e=document.body.scrollTop,t="body"):document.documentElement.scrollTop?(e=document.documentElement.scrollTop,t="documentElement"):isNaN(window.screenY)||(e=window.screenY,t="window")},scrollToPosition:function(){switch(t){case"body":document.body.scrollTop=e;break;case"documentElement":document.documentElement.scrollTop=e;break;case"window":window.scrollTo(0,e)}}}}(),_=function(){C.lock(document.getElementsByTagName("html")[0]),setTimeout(function(){C.lock(document.body)},1e3);var e=document.getElementsByClassName("tangiblee-modal-overlay")[0];e&&e.addEventListener("pointermove",t)},S=function(){C.unlock(document.getElementsByTagName("html")[0]),C.unlock(document.body);var e=document.getElementsByClassName("tangiblee-modal-overlay")[0];e&&e.removeEventListener("pointermove",t)};e.modal.show=function(t,i){I.savePosition();var o=document.getElementsByClassName("tangiblee-modal-overlay")[0],a=document.querySelector(".tangiblee-modal-content");if(o||!e.modal.isUsed()){if(t)o.style.transform="translate(0,0) translateZ(0)";else if(o)o.style.transform="translate(0,0) translateZ(0)",o.style.display="block";else{var r=document.querySelector(e.container);r&&(r.style.display="block")}if(a&&null!==e.sideView&&(setTimeout(function(){a.style.transform="translateX(0)",history.pushState(e.historyPushStateObj,"Tangiblee Virtual Try-On")},0),window.removeEventListener("popstate",k,!1),window.addEventListener("popstate",k,!1)),o&&o.setAttribute("is-showing",!0),e.utils.isItMobileOrTablet()&&window.scrollY)if(e.disableMobileScrollTop){var s=document.querySelector(".tangiblee-iframe").getBoundingClientRect();window.scrollTo(0,s.top)}else{var c=window.scrollY;window.scrollTo(0,-1),setTimeout(function(){window.scrollTo(0,c)},50)}window.tangibleeAnalytics("getTangibleeUserId",function(t){e.iframe.onLoadIsSet&&e.iframe.messaging.postMessageToIframe('{"type":"widgetopened", "data":"'+t+'"}')});var l=e.isCurrentArRingMode?e.activeSKU+"_ar":e.activeSKU;l=i?l+"_alt":l,l!==e.prevOpenedSKU&&(window.tangibleeAnalytics("trackWidgetOpen"),e.prevOpenedSKU=l,e.openedProducts.push(l)),window.tangibleeAnalytics("startRegisteringSession"),e.iframe.focusOnLoad();try{e.onModalOpened()}catch(u){console.error(u)}e.setSelectorsDisplay(!0,!1);e.customIframeSrcAttributes.some(function(e){return"availableIntegratedEmbedIframe"===e.key&&"1"===e.value}),e.customIframeSrcAttributes.some(function(e){return"availableRegularEmbedIframe"===e.key&&"1"===e.value});n(),_(),(e.onModalClosed||e.onKeepAlive)&&(e.timeInWidget=0,e.keepAliveIntervalId=setInterval(function(){e.onKeepAlive&&e.onKeepAlive(),e.timeInWidget+=5},5e3))}};var A=function(){var t;if("v3"===e.widgetVersion&&(t=document.getElementById("tng-a11y-focusable-el"),!t)){var n=document.createElement("a");n.id="tng-a11y-focusable-el",n.href="javascript:void(0)",n.rel="nofollow",n.style.position="absolute",n.style.top=0,n.style.right=0,n.setAttribute("aria-hidden",!0);var i=document.getElementsByTagName("div")[0];i&&i.children&&i.children[0]&&(i.insertBefore(n,i.children[0]),t=document.getElementById("tng-a11y-focusable-el"))}return t};e.modal.close=function(t,i,o){var a=document.getElementsByClassName("tangiblee-modal-overlay")[0],r=document.getElementsByClassName("tangiblee-modal-content")[0],s=e.iframe.getIframeSrc(),c=new URLSearchParams(s),l=c.get("availableRegularEmbedIframe");if(e.iframe.messaging.postMessageToIframe('{"type":"widgetclosed"}'),!a&&e.modal.isUsed()||!e.xlModal&&l){var u=document.querySelector(e.container);u&&(u.style.display="none",e.onCloseButtonClicked())}else{if(t)if(a)null!==e.sideView?setTimeout(function(){a.style.transform="translate(-100%,-100%) translateZ(0)"},300):a.style.transform="translate(-100%,-100%) translateZ(0)";else{var u=document.querySelector(e.container);u&&(u.style.display="none")}else a.style.display="none";r&&null!==e.sideView&&(r.style.transform="right"===e.sideView?"translateX(100%)":"translateX(-100%)",window.removeEventListener("popstate",k,!1),!o&&e.getHistoryBack&&a&&"true"===a.getAttribute("is-showing")&&history.back()),a&&a.setAttribute("is-showing",!1)}if(window.tangibleeAnalytics("trackWidgetClose"),e.keepAliveIntervalId&&clearInterval(e.keepAliveIntervalId),n(),S(),setTimeout(function(){I.scrollToPosition()},50),window.tangibleeAnalytics("stopRegisteringSession"),e.onModalClosed&&e.onModalClosed(e.timeInWidget),e.onForceWidgetClose&&e.onForceWidgetClose(e.isARAvailable),i){var d=document.querySelector("."+e.ctaCssClass);if(d&&("button"===d.tagName.toLowerCase()||"a"===d.tagName.toLowerCase()||d.hasAttribute("tabindex")))d.focus();else{var g=A();g&&g.focus()}}}}(),function(){var t=function(){if(e.activeATC)if("string"==typeof e.activeATC){var t=document.querySelectorAll(e.activeATC);n(t)}else Node.prototype.isPrototypeOf(e.activeATC)?e.utils.isElementVisible(e.activeATC)&&e.utils.fireEvent(e.activeATC,"click"):(HTMLCollection.prototype.isPrototypeOf(e.activeATC)||NodeList.prototype.isPrototypeOf(e.activeATC))&&n(e.activeATC)},n=function(t){for(var n,i=0;i<t.length;i++)if(n=t[i],e.utils.isElementVisible(n)){e.utils.fireEvent(n,"click");break}},i=[{type:"widgetready",listener:function(){e.storage.sendBunchProperties(),window.tangibleeAnalytics("getTangibleeUserId",function(t,n,i,o,a,r,s){var c={userId:t,sessionId:n,userIdForGA4:i,sessionCount:o,sessionEngaged:a,pageRefferer:r,pageURL:s,debugMode:!1};"debug"===e.utils.getParam("xtng_fake")&&(c.debugMode=!0);var l={type:"user",data:c};e.iframe.messaging.postMessageToIframe(JSON.stringify(l))}),e.iframe.messaging.postMessageToIframe('{"type":"tng_referrer","data":"'+encodeURIComponent(window.location.href)+'"}')}},{type:"widget_rendered",listener:function(){e.isWidgetLoaded=!0,e.onWidgedRendered()}},{type:"tng_stack_open",listener:function(){e.onStackOpened()}},{type:"tng_stack_close",listener:function(){e.onStackClosed()}},{type:"tng_swipe_left",listener:function(){e.onWidgetSwipedLeft()}},{type:"tng_swipe_right",listener:function(){e.onWidgetSwipedRight()}},{type:"add_to_cart",listener:function(n){if(e.onBeforeATCClickInWidget(),n.isStagingRoom){var i=e.activeSKU;return i=n.variants.join(),e.onBatchATCReceived(n.variants),e.onATCClickInWidget(),void window.tangibleeAnalytics("trackATCWidgetClick",n.atcTitle,n.variants)}var o=n.variants,i=e.activeSKU;o?(i=o.join(),e.onBatchATCReceived(o),e.modal.close(e.modal.isUsed())):e.activeATC&&(e.modal.close(e.modal.isUsed()),t());var a="";n.atcTitle&&(a=n.atcTitle),window.tangibleeAnalytics("trackATCWidgetClick",a,n.variants),e.isARAvailable&&window.tangibleeAnalytics("trackCustomEvent",{action:"ATC Widget AR",label:i,value:1,isInteraction:!1}),e.onATCClickInWidget()}},{type:"tng_popup_close",listener:function(t){e.modal.close(e.modal.isUsed(),t)}},{type:"tng_powered_by",listener:function(){var t=e.utils.getPoweredByHref();window.open(t,"_blank")}},{type:"widget_event",listener:function(e){window.tangibleeAnalytics("trackWidgetEvent",e)}},{type:"tng_ar_camera",listener:function(t){e.onCameraModeChange(t),e.isArActive="true"===t}},{type:"tng_product_variation_changed",listener:function(t){e.onProductVariationChanged(t)}},{type:"tng_item_stacked",listener:function(t){e.onNewItemStacked(t,function(t){var n={type:"stacked_item_data",data:t};e.iframe.messaging.postMessageToIframe(JSON.stringify(n))})}},{type:"tng_request_items_data",listener:function(t){e.onRequestItemsData(t,function(t){var n={type:"requested_items_data",data:t};e.iframe.messaging.postMessageToIframe(JSON.stringify(n))})}},{type:"qr_update",listener:function(t){e.qrCodeState.image=t.image,e.qrCodeState.show=t.show,e.qrCodeState.title=t.title,e.qrCodeState.clickable=t.clickable,e.modal.updateQr()}},{type:"tng_landscape_layout",listener:function(t){var n="true"===t;e.onLandscapeChange(n)}},{type:"tng_variation_changed",listener:function(t){var n=e.currentProductVariations,i=t.split(","),o=i[0],a=i[1],r=i[2];n[o][a]=n[o][a].map(function(t,n){return t.isActive=r===n.toString(),t.isActive&&t.ref&&e.utils.fireEvent(t.ref,"click"),t}),e.changePDPSelector(a,r,o)}}],o=function(e){if(("https://cdn.tangiblee.com"===e.origin||e.origin.indexOf("localhost")!==-1)&&e&&e.data&&"string"==typeof e.data){var t={};try{t=JSON.parse(e.data)}catch(n){}for(var o=0;o<i.length;o++)if(t.type==i[o].type){t.variants&&t.payload&&(t.payload.variants=t.variants);var a=t.isKeyboardEvent||t.step||t.active||t.sku||t.payload||t.landscape||t.changedVariation||t.data||void 0;i[o].listener(a)}}},a=function(t){var n,i=e.customIframeSrcAttributes.some(function(e){return"availableIntegratedEmbedIframe"===e.key&&"1"===e.value}),o=e.customIframeSrcAttributes.some(function(e){return"availableRegularEmbedIframe"===e.key&&"1"===e.value});return n="v2"===e.widgetVersion?'<iframe scrolling="no" style="position:relative;z-index:1;width:100%;height:100%;border:none;" src="'+t+'" class="tangiblee-iframe" id="tangiblee_iframe"></iframe>':null===e.sideView||i||o?i||o?'<iframe scrolling="no" style="position:relative;z-index:1;width:100%;height:100%;border:none;box-sizing:border-box;" src="'+t+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera; accelerometer; gyroscope; magnetometer; web-share;"></iframe>':window.innerWidth<1024&&e.utils.isItiOS?'<iframe scrolling="no" style="padding:0 5px;position:relative;z-index:1;width:100vw;max-width: 100%;height:100%;border:none;box-sizing:border-box;" src="'+t+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera; accelerometer; gyroscope; magnetometer; web-share;"></iframe>':'<iframe scrolling="no" style="background:white;position:relative;z-index:1;width:100%;height:100%;border:none;" src="'+t+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera; accelerometer; gyroscope; magnetometer; web-share;"></iframe>':'<iframe scrolling="no" style="background:white;position:relative;z-index:1;width:100vw;max-width: 100%;height:100%;border:none;box-sizing:border-box;" src="'+t+'" class="tangiblee-iframe" id="tangiblee_iframe" allow="camera; accelerometer; gyroscope; magnetometer; web-share;"></iframe>'};e.iframe.onLoadIsSet=!1,e.iframe.getIframeSrc=function(){var t;if("v2"===e.widgetVersion)t=window.innerWidth<=808?"//widget.tangiblee.com/mobile/"+e.product.id+"?domain="+e.domain:"//widget.tangiblee.com/desktop/"+e.product.id+"?domain="+e.domain;else{var n=e.product&&e.product.id,i=[];!!n&&i.push(n),e.variationSKUs.forEach(function(t){e.validSKUs.indexOf(t)!==-1&&i.indexOf(t)===-1&&i.push(t)});var o=e.utils.getWidgetUrlByPdpParam(),a="//cdn.tangiblee.com/widget/index.html",r=o||a;if(t=r+"?id="+(e.useMultiVariations?i.join(","):e.product.id)+"&domain="+e.domain,t+="&useCookies="+(e.useCookies?"1":"0"),e.activePrice&&(t+="&price="+e.activePrice),e.activeSalePrice&&e.activePrice&&(t+="&discount="+e.activeSalePrice),e.activeCurrency&&(t+="&currency="+e.activeCurrency),e.getFaceDiameter&&e.getFaceDiameter()&&(t+="&faceDiameter="+e.getFaceDiameter()),e.getFaceDiameter&&e.getFaceDiameter()&&e.getFaceDiameterDimensions()&&(t+="&faceDiameterDimensions="+e.getFaceDiameterDimensions()),e.doNotTrack&&(t+="&doNotTrack="+e.doNotTrack),e.availableModes.length>0){var s=e.availableModes.join(",");t+="&modes="+s}if(e.version&&(t+="&version="+e.version),e.wishlistSKUs.length>0&&(t+="&wishlist="+e.wishlistSKUs.join(",")),e.historySKUs.length>0&&(t+="&history="+e.historySKUs.join(",")),e.setLayoutUx4&&(t+="&ux4=1"),e.xlModal&&(t+="&availableGalleryWidget=1"),e.preloaderDesign&&(t+="&"+e.preloaderDesign),e.spinnerColor&&(t+="&spinnerColor="+e.spinnerColor),e.QMEnabled){var c=!!window.sessionStorage&&!!sessionStorage.getItem("QuantumMetricSessionID")&&sessionStorage.getItem("QuantumMetricSessionID"),l=!!window.localStorage&&!!localStorage.getItem("QuantumMetricUserID")&&localStorage.getItem("QuantumMetricUserID");t+="&qmenable=1",t+="&qmsid="+c.toString(),t+="&qmuid="+l.toString()}e.hideThumb&&(t+="&hideThumb=1"),e.globaleConfig&&(t+="&glCountry="+e.globaleConfig.glCountry,t+="&glCurrency="+e.globaleConfig.glCurrency),e.customIframeSrcAttributes.forEach(function(e){t+="&"+e.key+"="+e.value})}return t},e.iframe.inject=function(){e.modal.isUsed()&&e.modal.inject();var t=document.querySelector(e.container);if(t){var n=e.iframe.getIframeSrc(),i=a(n);t.innerHTML=i}},e.iframe.update=function(){var t=document.getElementById("tangiblee_iframe");if(t){var n=t.getAttribute("src"),i=n.replace(/(^\w+:|^)/,""),o=e.iframe.getIframeSrc(),a=o.replace(/(^\w+:|^)/,"");i!=a&&(t.src=o,e.onIframeSrcChange())}},e.iframe.exists=function(){return document.getElementById("tangiblee_iframe")},e.iframe.switchWidgetVariation=function(t){e.setActiveSKUAttribute(t.sku);var n=JSON.stringify(t);e.iframe.messaging.postMessageToIframe('{"type":"variationchanged","data":'+n+"}")},e.iframe.focusOnLoad=function(){var t=document.getElementById("tangiblee_iframe");e.iframe.onLoadIsSet?t.focus():t.onload=function(){e.onIframeLoaded(),e.isUserInteractedBefore||(t.addEventListener("click",e.onUserInteracted),e.isUserInteractedBefore=!0),setTimeout(function(){t.focus(),e.iframe.onLoadIsSet=!0},200)}},e.iframe.messaging={addMessageListener:function(e){i.push(e)},startListening:function(){!window.initialTangiblee&&window.addEventListener("message",o,!1),window.initialTangiblee=!0},postMessageToIframe:function(e){var t=document.getElementById("tangiblee_iframe");if(t){var n=t.contentWindow;if(n&&"function"==typeof n.postMessage){var i="https://cdn.tangiblee.com",o=t.getAttribute("src").indexOf("localhost")!==-1;o&&(i="*"),n.postMessage(e,i)}}}}}(),function(){var t={STORAGE_NAME:"TNG_HISTORY",get:function(){return this._loadData()},send:function(){var t=this.get();e.iframe.messaging.postMessageToIframe(JSON.stringify({type:"tng_storage",name:this.STORAGE_NAME,data:t}))},save:function(e){try{window.localStorage.setItem(this.STORAGE_NAME,JSON.stringify(e))}catch(t){window[this.STORAGE_NAME]=e}},remove:function(e){for(var t=this._loadData(),n=[],i=0;i<t.length;i++)t[i].id!==e&&n.push(t[i]);try{window.localStorage.setItem(this.STORAGE_NAME,JSON.stringify(n))}catch(o){window[this.STORAGE_NAME]=e}this.send()},_loadData:function(){if(window[this.STORAGE_NAME])return window[this.STORAGE_NAME];try{return JSON.parse(window.localStorage.getItem(this.STORAGE_NAME))||[]}catch(e){}return[]}},n={get:function(e){if(window[e])return window[e];try{var t=window.localStorage.getItem(e);t=JSON.parse(t)}catch(n){}return t},send:function(t){var n=this.get(t);n&&e.iframe.messaging.postMessageToIframe(JSON.stringify({type:"tng_storage",name:t,data:n}))},save:function(e,t){try{var n=t;"object"==typeof t&&(n=JSON.stringify(n)),window.localStorage.setItem(e,n)}catch(i){window[e]=t}},remove:function(e){try{window.localStorage.setItem(e,void 0)}catch(t){window[e]=void 0}}};e.storage={memo:{},complexProperties:{TNG_HISTORY:t},postMessageEventHandler:function(e){if(e&&e.name&&e.action){var t=e.data;this.complexProperties[e.name]&&this.complexProperties[e.name][e.action]?this.complexProperties[e.name][e.action](t):e&&e.name&&e.name.indexOf("TNG_")>-1&&n[e.action](e.name,t)}},sendProperties:function(){var e=this;Object.keys(localStorage).forEach(function(t){if(e.complexProperties[t]){var i=JSON.stringify(e.complexProperties[t].get());return void(i!==e.memo[t]&&(e.memo[t]=i,e.complexProperties[t].send()))}if(t&&t.indexOf("TNG_")>-1){var i=n.get(t);return void(i!==e.memo[t]&&(e.memo[t]=i,n.send(t)))}})},sendBunchProperties:function(){var t={},i=this;Object.keys(window.localStorage).forEach(function(e){if(i.complexProperties[e]){var o=i.complexProperties[e].get();return void(o&&(t[e]=o))}if(e&&e.indexOf("TNG_")>-1){var o=n.get(e);return void(o&&(t[e]=o))}}),e.iframe.messaging.postMessageToIframe(JSON.stringify({type:"tng_storage",name:"all",data:t}))}},e.iframe.messaging.addMessageListener({type:"tng_storage",listener:e.storage.postMessageEventHandler.bind(e.storage)}),window.addEventListener("storage",function(){e.storage.sendProperties()})}(),function(){window.tangiblee_instance=window.tangiblee_instance||0,window.tangiblee_instance>0||(window.tangiblee_instance+=1,window.tangiblee=window.tangiblee||function(){(tangiblee.q=tangiblee.q||[]).push(arguments)},tangiblee("require",["utils"],function(e){!function(){var e=".tangiblee-wrapper{position:absolute;left:0;bottom:-20px}.tangiblee-cta{width:132px;height:19px;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center}.tangiblee-cta:before{content:\'\';background:url(https://cdn.tangiblee.com/integration/3.1/managed/www.tanishq.co.in/revision_2/variation_original/img/glass.svg) no-repeat 50%;width:19px;height:19px;margin-right:3px}@media (max-width:767px){.tangiblee-wrapper{bottom:-22px}.tangiblee-cta{font-weight:700;max-width:97px;font-size:12px;color:#832729}.tangiblee-cta:before{display:none}}",t=document.createElement("style");t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}();var t=function(){var e,t=n(),i=/[^A-Za-z0-9_]/g;return t&&t[0]&&(e=t[0]),e&&e.toLowerCase&&(e=e.toLowerCase().replace(i,"-")),e},n=function(){var e,t=[],n=document.querySelector("meta[name='partNumber']"),i=n&&n.getAttribute("content");if(i){var o=n.getAttribute("content"),a=o.indexOf("_")>-1;if(a){var r=o.indexOf("_");e=o.slice(0,r)}else e=o}if(e){if(e=e.toLowerCase(),e.indexOf(">")>-1){var s=window.location.pathname;if(s&&s.split){var c=s.split("-");c.length&&(e=c[c.length-1])}}t.push(e)}return t},i="tangiblee-cta",o=function(e,t){if(document.querySelector("."+i))return i;var n=document.createElement("div"),o=document.querySelector(".react-main-slider .slick-slider"),a=document.createElement("div"),r=document.createElement("span"),s=window.innerWidth<=767;return a.classList="tangiblee-wrapper",n.classList.add(i),r.innerText=s?"Compare sizes":"Click to Compare",a.appendChild(n),n.appendChild(r),o&&o.appendChild(a),i},a=function(){var e,t=document.querySelectorAll(".align-items-baseline .offer-price span")[1];return t&&t.textContent&&(e=t.textContent),e},r=function(){return"₹"},s=function(){tangiblee("activePrice",a())};tangiblee("domain","tanishq.co.in"),tangiblee("useCookies",!0),tangiblee("showCTA",o),tangiblee("onCtaClicked",s),tangiblee("activeATC",".functionality-button-pdp.secondary-btn-type-black"),tangiblee("setCustomIframeSrcAttributes",[{key:"externalClasses",value:"redesign-stg"}]),e.ready(function(){tangiblee("activeSKU",t()),tangiblee("activePrice",a()),tangiblee("activeCurrency",r()),tangiblee("startOnSKUs",n());var e=document.querySelector(".price-wrap .offer-price");if(e){var i=new MutationObserver(function(e){setTimeout(function(){tangiblee("activePrice",a()),tangiblee("activeCurrency",r())},100)});i.observe(e,{childList:!0,characterData:!0,subtree:!0})}})}),window.tangibleeAnalytics=window.tangibleeAnalytics||function(){(window.tangibleeAnalytics.q=window.tangibleeAnalytics.q||[]).push(arguments)},window.tangibleeAnalytics("setAnalyticsPlugin","GoogleAnalytics",{trackingId:"sit.tanishq.co.in"!==window.location.host&&"UA-61907198-50"}),"sit.tanishq.co.in"!==window.location.host&&window.tangibleeAnalytics("setAnalyticsPlugin","GoogleAnalytics",{trackingId:"UA-32186177-1",trackerName:"tng_tanishq",useCustomerTrackingId:!0,ecommerceTracking:!1,customTangibleeDimension:5,customWidgetDimension:6,customWidgetSessionDimension:7,customTangibleeSessionDimension:8,customTangibleeUserDimension:9}))}();var l=function(){window.tangibleeAnalytics("trackATCClick")},u={startOnSKUs:function(t){window.parent.postMessage(JSON.stringify({type:"qr_update",payload:{action:"image-update",show:!1}}));var n=!0,i=function(t){if(t){if("string"==typeof t)n=!1,e.SKUs.push(t);else if(t.constructor===Array&&t.length>0)for(var i=0;i<t.length;i++)t[i]&&"string"==typeof t[i]&&e.SKUs.indexOf(t[i])===-1&&(n=!1,e.SKUs.push(t[i]));e.SKUs&&0!==e.SKUs.length&&(1===e.SKUs.length&&tangiblee("activeSKU",e.SKUs[0]),e.thumbs={},n||e.validateSKUs().then(function(t){e.setTangibleeParams(t),e.onSKUsValidated(t.exists,t.products);var n=[];for(var i in t.products)t.exists[i]&&n.push(t.products[i].id);if(e.analyticsPluginsIsSet||(e.analyticsSettings&&void 0!==e.analyticsSettings.useAnalyticsCookie&&tangiblee("useAnalyticsCookies",e.analyticsSettings.useAnalyticsCookie),e.onGoogleAnalyticsIsReady(e.tangibleeGA3TrackingId,e.analyticsSettings),e.analyticsPluginsIsSet=!0),n.length){for(var o=0;o<n.length;o++)e.validSKUs.indexOf(n[o])===-1&&e.validSKUs.push(n[o]);var a=e.getContainedId();if(a&&(e.activeSKU=a),e.product=e.products[e.activeSKU],n.indexOf(e.activeSKU)>-1){e.iframe.update();var r=function(t){t&&(e.onCTAShown&&e.onCTAShown(),e.setCtaClickHandler(),"onActiveSKUChange"===e.loadIframe&&e.iframe.inject());var i=n.slice().sort(function(t){return t==e.activeSKU?-1:0});e.trackHistory(),window.tangibleeAnalytics("trackImpression",i)};window.tangibleeAnalytics("setProduct",e.product);var s=e.showCTA(e.activeSKU,e.getThumb());e.updateCTAAttributes(),s&&s.then?s.then(function(t){e.ctaCssClass=t,r(t)}):s&&s.skipImpression||(e.ctaCssClass=s,r(s)),e.shouldForceWidgetOpen()&&(e.iframe.exists()?e.iframe.update():e.iframe.inject(),e.onCtaClicked({}),e.onForceWidgetOpen(e.isARAvailable),e.modal.show(e.modal.isUsed()))}else e.hideCTA()}else e.hideCTA()})["catch"](function(e){e&&TrackJS.isInstalled()&&TrackJS.track(e.message)}))}};t&&t.then?t.then(function(e){i(e)}):i(t)},isSKUEligible:function(t){return e.validSKUs.indexOf(t)>-1},onGoogleAnalyticsIsReady:function(t){e.onGoogleAnalyticsIsReady=t},domain:function(t){return t?(e.domain=t,void window.tangibleeAnalytics("setRetailer",t)):e.domain},useCookies:function(t){return"undefined"==typeof t?e.useCookies:void(e.useCookies=t)},useAnalyticsCookies:function(t){return"undefined"==typeof t?e.useAnalyticsCookies:void(e.useAnalyticsCookies=t)},embedState:function(t){return"undefined"==typeof t?e.isEmbed:(e.isEmbed=t,void window.tangibleeAnalytics("setEmbedState",t))},container:function(t){e.container=t},sideView:function(t){e.sideView=t},xlView:function(t){e.xlView=t},xlModal:function(t){e.xlModal=t},require:function(t,n){if(t){for(var i=[],o=0;o<t.length;o++)e[t[o]]&&i.push(e[t[o]]);i.length>0&&n.apply(this,i)}},showCTA:function(t){if(e.activateResizeInject){var n=!1;window.addEventListener("resize",function(){n=setTimeout(function i(){e.hideCTA(),window.removeEventListener("resize",i),e.validSKUs.indexOf(e.activeSKU)>-1&&(t(),e.setCtaClickHandler()),clearTimeout(n),n=!1},500)})}e.showCTA=t},hideCTA:function(t){e.hideCTA=t},updateCTAAttributes:function(){e.updateCTAAttributes()},setCtaClickHandler:function(){e.setCtaClickHandler()},widgetVersion:function(t){var n=["v3","v2"];n.indexOf(t)>-1&&(e.widgetVersion=t)},usePDPHistory:function(t){t&&(e.usePDPHistory=!0,t.maxPDPHistoryItems&&(e.maxPDPHistoryItems=t.maxPDPHistoryItems),t.skipCategoryInPDPHistory&&(e.skipCategoryInPDPHistory=t.skipCategoryInPDPHistory))},activeSKU:function(t){return t&&t.toLowerCase&&(e.setActiveSKUAttribute(t),e.activeSKU=t.toLowerCase(),e.updateSku()),e.activeSKU},hideThumb:function(t){return void 0!==t&&(e.hideThumb=t),e.hideThumb},activeLocale:function(t){e.activeLocale=t,e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},activePrice:function(t){e.activePrice=t,e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},activeSalePrice:function(t){e.activeSalePrice=t,e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},activateResizeInject:function(){e.activateResizeInject=!0},isContainedId:function(t){e.isContainedId=t()},activateMultiVariations:function(){e.useMultiVariations=!0},activateGlobale:function(t){e.globaleConfig=t},variationSKUs:function(t){return t?(e.variationSKUs=t,void(e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&(e.skipFrameSrcUpdate||e.iframe.update()))):e.variationSKUs},wishlistSKUs:function(t,n){n&&n.length&&!e.isWishlistValidated?e.validateSelectedSKUs(t).then(function(t){var i=Object.keys(t.products).map(function(e){return t.products[e]}),o=i.filter(function(e){return n.indexOf(e.categoryId)>-1}).map(function(e){return e.id});e.wishlistSKUs=o,e.iframe.update(),e.isWishlistValidated=!0})["catch"](function(t){e.isWishlistValidated=!0,t&&TrackJS.isInstalled()&&TrackJS.track(t.message)}):t&&(e.wishlistSKUs=t)},productSilentUpdate:function(t){t.sku!==t.oldSku&&(e.setActiveSKUAttribute(t.sku),t.oldSku=e.activeSKU,e.variationSKUs=t.variations,e.validSKUs=t.variations,e.product={id:t.sku},e.activeSKU=t.sku,e.activeSalePrice=t.discountedPrice,e.activePrice=t.price,e.activeCurrency=t.currency,e.onProductUpdated&&e.onProductUpdated(t))},onNewItemStacked:function(t){e.onNewItemStacked=t},onRequestItemsData:function(t){e.onRequestItemsData=t},onProductVariationChanged:function(t){e.onProductVariationChanged=t},changePDPSelector:function(t){e.changePDPSelector=t},sendProductVariations:function(t){var n=JSON.stringify(t);e.isWidgetLoaded&&n!==e.cachedProductVariations&&(e.cachedProductVariations=n,e.currentProductVariations=t,e.iframe.messaging.postMessageToIframe('{"type":"tng_variations","data": '+JSON.stringify(t)+"}"))},onBatchATCReceived:function(t){e.onBatchATCReceived=t},switchWidgetVariation:function(t){var n=e.getContainedId();n&&(t.sku=n);var i=t.sku;if(e.validSKUs.indexOf(i)>-1&&e.variationSKUs.indexOf(i)>-1){var o=e.showCTA(i,e.getThumb(i));o&&o.then?o.then(function(t){e.ctaCssClass=t,e.setCtaClickHandler()}):(e.ctaCssClass=o,e.setCtaClickHandler()),e.iframe.switchWidgetVariation(t)}else e.hideCTA(i),e.modal.close(e.modal.isUsed())},activeCurrency:function(t){e.activeCurrency=t,e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},activeATC:function(t){e.activeATC=t,"string"==typeof t&&e.utils.ready(function(){for(var e=document.querySelectorAll(t),n=0;n<e.length;n++){var i=e[n];i.removeEventListener("click",l),i.addEventListener("click",l)}})},openWidget:function(){e.utils.waitForConditionToMet(function(){return e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1}).then(function(){var t=!1,n="arEnabled";e.customIframeSrcAttributes.forEach(function(e){e.key===n&&(e.value="1",t=!0)}),t||e.customIframeSrcAttributes.push({key:n,value:"1"}),e.iframe.exists()?e.skipFrameSrcUpdate||e.iframe.update():e.iframe.inject(),e.modal.show(e.modal.isUsed())})},onSKUsValidated:function(t){e.onSKUsValidated=t},onCTAShown:function(t){e.onCTAShown=t},onCtaClicked:function(t){e.onCtaClicked=t},onModalOpened:function(t){e.onModalOpened=t},onIframeLoaded:function(t){e.onIframeLoaded=t},onProductUpdated:function(t){e.onProductUpdated=t},onUserInteracted:function(t){e.onUserInteracted=t},onModalClosed:function(t){e.onModalClosed=t},onStackOpened:function(t){e.onStackOpened=t},onStackClosed:function(t){e.onStackClosed=t},onCloseButtonClicked:function(t){e.onCloseButtonClicked=t},onWidgetSwipedLeft:function(){e.onWidgetSwipedLeft=onWidgetSwipedLeft},onWidgetSwipedRight:function(){e.onWidgetSwipedRight=onWidgetSwipedRight},onKeepAlive:function(t){e.onKeepAlive=t},onCameraModeChange:function(t){e.onCameraModeChange=t},onBeforeATCClickInWidget:function(t){e.onBeforeATCClickInWidget=t},onATCClickInWidget:function(t){e.onATCClickInWidget=t},onWidgedRendered:function(t){e.onWidgedRendered=t},onIframeSrcChange:function(t){e.onIframeSrcChange=t},cleanTangibleeSKUs:function(){e.SKUs=[]},validateSKUs:function(t,n){var i=function(t){if(t){if("string"==typeof t)e.SKUs.push(t);else if(t.constructor===Array&&t.length>0)for(var i=0;i<t.length;i++)t[i]&&"string"==typeof t[i]&&e.SKUs.indexOf(t[i])===-1&&e.SKUs.push(t[i]);
e.SKUs&&0!==e.SKUs.length&&(1===e.SKUs.length&&tangiblee("activeSKU",e.SKUs[0]),e.thumbs={},e.validateSKUs().then(function(t){e.setTangibleeParams(t),e.onSKUsValidated(t.exists,t.products);var i=[];for(var o in t.products)t.exists[o]&&i.push(t.products[o].id);e.analyticsPluginsIsSet||(e.analyticsSettings&&void 0!==e.analyticsSettings.useAnalyticsCookie&&tangiblee("useAnalyticsCookies",e.analyticsSettings.useAnalyticsCookie),e.onGoogleAnalyticsIsReady(e.tangibleeGA3TrackingId,e.analyticsSettings),e.analyticsPluginsIsSet=!0),i.length?(e.validSKUs=i,e.activeSKU||(e.activeSKU=i[0]),e.product=e.products[e.activeSKU],n()):e.hideCTA()})["catch"](function(e){e&&TrackJS.isInstalled()&&TrackJS.track(e.message)}))}};t.then?t.then(function(e){i(e)}):i(t)},activateABTest:function(){window.parent.postMessage(JSON.stringify({type:"qr_update",payload:{action:"image-update",show:!1}}));var t=e.validSKUs,n=e.getContainedId();if(n&&(e.activeSKU=n),t.length&&t.indexOf(e.activeSKU)>-1){e.iframe.update();var i=function(n){n&&(e.onCTAShown&&e.onCTAShown(),e.setCtaClickHandler(),"onActiveSKUChange"===e.loadIframe&&e.iframe.inject());var i=t.slice().sort(function(t){return t==e.activeSKU?-1:0});e.trackHistory(),window.tangibleeAnalytics("trackImpression",i)};window.tangibleeAnalytics("setProduct",e.product);var o=e.showCTA(e.activeSKU,e.thumbs[e.product.id]);o&&o.then?o.then(function(t){e.ctaCssClass=t,i(t)}):(e.ctaCssClass=o,i(o)),e.shouldForceWidgetOpen()&&(e.iframe.exists()?e.iframe.update():e.iframe.inject(),e.onCtaClicked({}),e.onForceWidgetOpen(e.isARAvailable),e.modal.show(e.modal.isUsed()))}else e.hideCTA()},preventDefaultOnCtaClick:function(t){e.preventDefaultOnCtaClick=t},stopPropagationOnCtaClick:function(t){e.stopPropagationOnCtaClick=t},useClickEventInsteadMousedown:function(t){e.useClickEventInsteadMousedown=t},availableModes:function(t){t&&Array.prototype.isPrototypeOf(t)&&(e.availableModes=t,e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update())},categoryThumbsDefault:function(t){e.categoryThumbsDefault=t},setCustomIframeSrcAttributes:function(t){var n=function(e){return e.toString().trim().replace(/[^0-9A-z]/g,"")};t instanceof Array&&t.forEach(function(t){if(t.key){var i=!1;e.customIframeSrcAttributes.forEach(function(e){e.key===n(t.key)&&(e.value=encodeURI(t.value),i=!0)}),i||e.customIframeSrcAttributes.push({key:n(t.key),value:encodeURI(t.value)})}}),e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},disableMobileScrollTop:function(t){e.disableMobileScrollTop=t},getHistoryBack:function(t){e.getHistoryBack=t},clearIframeSrcAttributes:function(){e.customIframeSrcAttributes=[],e.iframe.exists()&&e.activeSKU&&e.validSKUs.indexOf(e.activeSKU)>-1&&e.iframe.update()},skipFrameSrcUpdate:function(t){e.skipFrameSrcUpdate=t},onForceWidgetOpen:function(t){e.onForceWidgetOpen=t},onForceWidgetClose:function(t){e.onForceWidgetClose=t},isModalOpened:function(){var e=document.querySelector(".tangiblee-modal-overlay");return e&&"true"===e.getAttribute("is-showing")},setHistoryPushStateObj:function(t){e.historyPushStateObj=t}};if(Math.random()<.005&&TrackJS.install({token:"361b2d56afe74d42bc4f2b449e00b39a",application:"integration-scripts-31",console:{enabled:!1},callback:{enabled:!1},network:{enabled:!1},visitor:{enabled:!1},window:{enabled:!1,promise:!1}}),!window.tangibleeScriptLoaded){window.tangibleeScriptLoaded=!0;var d=window.tangiblee&&window.tangiblee.q||[];window.tangiblee=function(){try{for(var e=arguments[0],t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return u[e].apply(this,t)}catch(i){i&&TrackJS.isInstalled()&&TrackJS.track(i.message)}};for(var g=!1,f=0;f<d.length;f++)"openWidget"===d[f][0]?g=d[f]:window.tangiblee.apply(this,d[f]);g&&window.tangiblee.apply(this,g),e.version="3.1.2.219",e.timeOfInit=new Date,e.iframe.messaging.startListening()}!function(){var e={config:{variation:"Tangiblee ON",variationGA4:"yes",retailer:"www.tangiblee.com",product:{category:"Default",categoryId:-1,label:"Unknown"},parseOn:!1,trackOn:!1,orderParser:!1,useCookies:"function"!=typeof tangiblee||tangiblee("useCookies")!==!1,useAnalyticsCookies:"function"!=typeof tangiblee||tangiblee("useAnalyticsCookies")!==!1,isEmbed:!1,cookieUserKey:"tangiblee:widget:user",cookieCDKey:"tangiblee_cd",trackingIdForIP:!1,isUserInitialized:!1},state:{userId:!1,sessionId:!1,sessionCount:!1,sessionEngaged:!1,plugins:{},activatedPlugins:[],timeOfInit:new Date,customDimensions:{},customMetrics:{},timeDelta:0,currentPage:window.location.href},mailBox:{}};e.utils={},e.utils.onCheckoutCompleted=function(){},e.utils.storage={getCookie:function(e){var t,n,i=e+"=",o=document.cookie.split(";");for(t=0;t<o.length;t++){for(n=o[t];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(i))return n.substring(i.length,n.length)}return""},setCookie:function(e,t,n){var i=new Date;i.setTime(i.getTime()+24*(n||365)*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";path=/; Secure;"},removeCookie:function(t){e.utils.storage.getCookie(t)&&(document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;")},setLS:function(e,t){var n="object"==typeof t?JSON.stringify(t):t;if(n.length>0)try{return localStorage.setItem(e,n),!0}catch(i){return!1}return!1},getLS:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)}catch(n){return!1}},removeLS:function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}},e.utils.getParam=function(e){var t=function(){for(var e,t,n,i={},o=window.location.search.substring(1).split("&"),a=0;a<o.length;a++)e=o[a],t=e.split("="),n={key:t[0],value:t[1]},n.key&&(i[n.key]=n.value||"");return i},n=t();return!!n[e]&&decodeURI(n[e])},e.utils.pageChecker=function(){var t=function(e){if(!window.location||!window.location.href)return!1;var t,n,i;for(t=0;t<e.length;t++)if(n=e[t],i=!1,i="function"==typeof n?n():"function"==typeof n.test?n.test(window.location.href):window.location.href.toLowerCase().indexOf(n.toString().toLowerCase())>0)return!0;return!1};return{isParseRevenuePage:function(){return!!e.config.parseOn&&t(e.config.parseOn)},isTrackRevenuePage:function(){return!!e.config.trackOn&&t(e.config.trackOn)}}}(),e.utils.transferCookies=function(){var t=e.config.cookieUserKey,n=e.utils.getParam(encodeURIComponent(t));n&&e.utils.storage.setCookie(t,n)},e.utils.http={fetch:function(e,t,n,i,o){try{var a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/json"),a.onreadystatechange=function(){a.readyState>3&&a.status>=200&&a.status<400&&i&&i(a.responseText.length&&JSON.parse(a.responseText))},a.onerror=function(){o&&o(a.statusText)},a.send(n)}catch(r){o&&o(r)}}},e.utils.waitForConditionToMet=function(e,t){t=t||500;var n,i=0,o=function(){};return{then:function(a){return function r(){e()?(a(),"undefined"!=typeof n&&clearTimeout(n)):i++>t?(o(),"undefined"!=typeof n&&clearTimeout(n)):n=setTimeout(r,100)}(),{fail:function(e){o=e}}}}},e.utils.ready=function(e){"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)},e.utils.isItMobileOrTablet=function(){var e=navigator.userAgent;return e.match(/Android/i)||e.match(/BlackBerry/i)||e.match(/iPhone|iPad|iPod/i)||e.match(/Opera Mini/i)||e.match(/IEMobile/i)},e.utils.isItTablet=function(){var e=navigator.userAgent.toLowerCase(),t=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e);return t},e.utils.setUserID=function(){var t=window.crypto||window.msCrypto,n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})},i=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^t.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})};e.state.userId||("undefined"!=typeof t&&t.getRandomValues?e.state.userId=i():e.state.userId=n())},e.utils.setSessionId=function(t){var n=(new Date).getTime()+"";n=n.slice(0,-3);var i;if(t){var o=e.utils.storage.getCookie("_ga_"+t.slice(2));o&&(i=o.split(".")[2])}e.config.useAnalyticsCookies&&i&&!e.state.sessionId?e.state.sessionId=i:e.state.sessionId||(e.state.sessionId=n)},e.utils.setSessionCount=function(t){var n=e.utils.storage.getCookie("_ga_"+t.slice(2));if(n){var i=n.split(".")[3];e.state.sessionCount=i}},e.utils.setSessionEngaged=function(t){var n=e.utils.storage.getCookie("_ga_"+t.slice(2));if(n){var i=n.split(".")[4];e.state.sessionEngaged=i}},function(){var t="AdobeAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={tangibleeEVar:!1,tangibleeSessionEVar:!1,widgetEVar:!1,widgetSessionEVar:!1,userIdEVar:!1};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=function(){if(e.mailBox[n])for(var t=0;t<e.mailBox[n].length;t++)e.mailBox[n][t]();i=!0,e.mailBox[n]=[]};return r(),{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(){s&&(s[t.tangibleeEVar]=e.config.variation,s[t.tangibleeSessionEVar]=e.config.variation,s[t.userIdEVar]=e.state.userId.split(";")[0],s.linkTrackVars=[t.tangibleeEVar,t.tangibleeSessionEVar,t.userIdEVar].join(),s.tl(!0,"o","Tangiblee Experience"))},trackWidgetOpen:function(){if(s){var e=(new Date).toISOString().substring(0,10),n="Widget Opened "+e;s[t.widgetEVar]=n,s[t.widgetSessionEVar]=n,s.linkTrackVars=[t.widgetEVar,t.widgetSessionEVar].join(),s.tl(!0,"o","Tangiblee Experience")}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(e){return!1},trackCustomEvent:function(e){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="AzureAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={appKey:"b934bb02-9526-424c-b803-831e89bc8d5c"};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=function(){if(e.mailBox[n])for(var t=0;t<e.mailBox[n].length;t++)e.mailBox[n][t]();i=!0,e.mailBox[n]=[]};r(),!function(e,n,i){var o=e.location,a="script",r="instrumentationKey",s="ingestionendpoint",c="disableExceptionTracking",l="ai.device.",u="toLowerCase",d="crossOrigin",g="POST",f="appInsightsSDK",m=i.name||"appInsights";(i.name||e[f])&&(e[f]=m);var p=e[m]||function(f){function m(e,t){var n={},i="Browser";return n[l+"id"]=i[u](),n[l+"type"]=i,n["ai.operation.name"]=o&&o.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(b.sv||b.version),{time:function(){function e(e){var t=""+e;return 1===t.length&&(t="0"+t),t}var t=new Date;return t.getUTCFullYear()+"-"+e(1+t.getUTCMonth())+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+((t.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}function p(n){var a,c,l,d,p,v,h,C,I,_,S;y=!0,b.queue=[],w||(w=!0,a=k,h=function(){var e={},t=f.connectionString;if(t)for(var n=t.split(";"),i=0;i<n.length;i++){var o=n[i].split("=");2===o.length&&(e[o[0][u]()]=o[1])}if(!e[s]){var a=e.endpointsuffix,r=a?e.location:null;e[s]="https://"+(r?r+".":"")+"dc."+(a||"services.visualstudio.com")}return e}(),C=h[r]||f[r]||"",I=h[s],_=I?I+"/v2/track":t.endpointUrl,(S=[]).push((c="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",l=a,d=_,(v=(p=m(C,"Exception")).data).baseType="ExceptionData",v.baseData.exceptions=[{typeName:"SDKLoadFailed",message:c.replace(/\./g,"-"),hasFullStack:!1,stack:c+"\nSnippet failed to load ["+l+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(o&&o.pathname||"_unknown_")+"\nEndpoint: "+d,parsedStack:[]}],p)),S.push(function(e,t,n,i){var o=m(C,"Message"),a=o.data;a.baseType="MessageData";var r=a.baseData;return r.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',r.properties={endpoint:i},o}(0,0,a,_)),function(t,n){if(JSON){var o=e.fetch;if(o&&!i.useXhr)o(n,{method:g,body:JSON.stringify(t),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(g,n),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(t))}}}(S,_))}function v(e,t){w||setTimeout(function(){!t&&b.core||p()},500)}function h(e){for(;e.length;)!function(e){b[e]=function(){var t=arguments;y||b.queue.push(function(){b[e].apply(b,t)})}}(e.pop())}var y=!1,w=!1,b={initialize:!0,queue:[],sv:"4",version:2,config:f},k=f.url||i.src;if(k){var C=function(){var e=n.createElement(a);e.src=k;var t=i[d];return!t&&""!==t||"undefined"==e[d]||(e[d]=t),e.onload=v,e.onerror=p,e.onreadystatechange=function(t,n){"loaded"!==e.readyState&&"complete"!==e.readyState||v(0,n)},e}();i.ld<0?n.getElementsByTagName("head")[0].appendChild(C):setTimeout(function(){n.getElementsByTagName(a)[0].parentNode.appendChild(C)},i.ld||0)}try{b.cookie=n.cookie}catch(I){}var _="track",S="TrackPage",A="TrackEvent";h([_+"Event",_+"PageView",_+"Exception",_+"Trace",_+"DependencyData",_+"Metric",_+"PageViewPerformance","start"+S,"stop"+S,"start"+A,"stop"+A,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),b.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var x=(f.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==f[c]&&!0!==x[c]){method="onerror",h(["_"+method]);var T=e[method];e[method]=function(e,t,n,i,o){var a=T&&T(e,t,n,i,o);return!0!==a&&b["_"+method]({message:e,url:t,lineNumber:n,columnNumber:i,error:o}),a},f.autoExceptionInstrumented=!0}return b}(i.cfg);(e[m]=p).queue&&0===p.queue.length&&p.trackPageView({})}(window,document,{src:"https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js",name:"tngAppInsights",cfg:{instrumentationKey:t.appKey}});var s=function(e,t){tngAppInsights.trackEvent({name:e})};return{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(){s("impression")},trackWidgetOpen:function(){s("open widget")},trackWidgetClose:function(){s("close widget")},trackATCClick:function(){s("ATC")},trackATCWidgetClick:function(){s("ATC Widget")},trackOrder:function(e){s("Conversion")},trackCustomEvent:function(e){s(e.action)},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="ConvertAnalytics",n="Convert";e.state.plugins[t]=function(t,i){var o=!1;t=t||{};var a={convertPDPImpression:!1,convertWidgetOpenGoal:!1,convertATCGoal:!1,convertATCWidgetGoal:!1,convertConversionGoal:!1,convertRevenueGoal:!1};for(var r in a)t[r]="undefined"!=typeof t[r]?t[r]:a[r];var s=function(){if(e.mailBox[i])for(var t=0;t<e.mailBox[i].length;t++)e.mailBox[i][t]();o=!0,e.mailBox[i]=[]};s();var c=function(e){window._conv_q=window._conv_q||[],window._conv_q.push(["triggerConversion",e])},l=function(e){var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.async=!0,t.src="//cdn-4.convertexperiments.com/js/"+e.accountId+"-"+e.projectId+".js",t.onload=function(){e.onload()},n.parentNode.insertBefore(t,n)},u=function(e){l({accountId:e.accountId,projectId:e.projectId,onload:function(){window.tngRunExperiment=1,window._conv_q=window._conv_q||[],window._conv_q=window._conv_q||[],window._conv_q.push({what:"addListener",params:{event:"experience.activated",handler:function(t){if(t.data.experience_id===e.experimentId){var i=t.data.variation_id;e.onExperimentReady(n,i)}}}}),window._conv_q.push(["executeExperiment",e.experimentId])}})};return{_unique_id:t._unique_id,isReady:function(){return o},activate:function(){return!0},setExperiment:function(e){e.provider===n&&t.runExperiment&&u(e)},trackImpression:function(){t.convertPDPImpression&&c(t.convertPDPImpression)},trackWidgetOpen:function(){t.convertWidgetOpenGoal&&c(t.convertWidgetOpenGoal)},trackWidgetClose:function(){return!1},trackATCClick:function(){t.convertATCGoal&&c(t.convertATCGoal)},trackATCWidgetClick:function(){t.convertATCWidgetGoal&&c(t.convertATCWidgetGoal)},trackOrder:function(e){t.convertRevenueGoal&&e&&0!==e.total&&(window._conv_q=window._conv_q||[],e.id=e.id||(new Date).getTime(),window._conv_q.push(["pushRevenue",e.total,e.items.length,t.convertRevenueGoal]))},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="DataLayerAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={singleEvent:!1,singleEventName:"tangiblee_interaction",isAvailable:!1};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=function(){if(e.mailBox[n])for(var t=0;t<e.mailBox[n].length;t++)e.mailBox[n][t]();i=!0,e.mailBox[n]=[]};return r(),{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(n){if(!t.isAvailable||t.isAvailable())if(t.singleEvent){var i="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId,o={event:t.singleEventName,event_action:"tangiblee impression"};e.config.product.id&&(o.event_label=e.config.product.id),o.event_label=o.event_label+i,dataLayer&&dataLayer.push(o)}else dataLayer&&dataLayer.push({event:"Tangiblee Impression"})},trackWidgetOpen:function(){if(!t.isAvailable||t.isAvailable()){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n;if(dataLayer)if(t.singleEvent){var o="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId,a={event:t.singleEventName,event_action:"tangiblee open",tangiblee_widget:i};e.config.product.id&&(a.event_label=e.config.product.id),a.event_label=a.event_label+o,dataLayer&&dataLayer.push(a)}else dataLayer.push({TangibleeOpen:i}),dataLayer.push({event:"Tangiblee Open"})}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){if(!t.isAvailable||t.isAvailable())if(t.singleEvent){var n="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId,i={event:t.singleEventName,event_action:"tangiblee add to cart"};e.config.product.id&&(i.event_label=e.config.product.id),i.event_label=i.event_label+n,dataLayer&&dataLayer.push(i)}else dataLayer&&dataLayer.push({event:"Tangiblee ATC"})},trackOrder:function(e){return!1},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="DataLayerClientAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={dataLayer:"dataLayer",impressionEventName:!1,eventName:"trackEvent",eventCategory:"Tangiblee Experience",eventImpressionAction:"Tangiblee Impression",eventOpenAction:"Tangiblee Open",eventAltOpenAction:"Tangiblee Open AR",eventATCAction:"Tangiblee Add To Cart",ecommerceFetcher:!1,customTangibleeDimension:!1,customWidgetDimension:!1,customWidgetSessionDimension:!1,customTangibleeSessionDimension:!1,customTangibleeUserDimension:!1,isAvailable:!1};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=function(){if(e.mailBox[n])for(var t=0;t<e.mailBox[n].length;t++)e.mailBox[n][t]();i=!0,e.mailBox[n]=[]};return r(),{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){return!0},setExperiment:function(){return!1},trackImpression:function(n){var i="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId,o={event:t.impressionEventName||t.eventName,eventAction:t.eventImpressionAction,eventLabel:n[0]+i,nonInteraction:1};t.eventCategory&&(o.eventCategory=t.eventCategory),t.customTangibleeDimension&&(o["dimension"+t.customTangibleeDimension]=e.config.variation),t.customTangibleeSessionDimension&&(o["dimension"+t.customTangibleeSessionDimension]=e.config.variation),t.customTangibleeUserDimension&&(o["dimension"+t.customTangibleeUserDimension]=e.state.userId.split(";")[0]),window[t.dataLayer]&&window[t.dataLayer].push(o)},trackWidgetOpen:function(){if(!t.isAvailable||t.isAvailable()){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n,o="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId,a={event:t.eventName,eventAction:t.eventOpenAction,nonInteraction:1};t.eventCategory&&(a.eventCategory=t.eventCategory),e.config.product.id&&(a.eventLabel=e.config.product.id+o),t.customWidgetDimension&&(a["dimension"+t.customWidgetDimension]=i),t.customWidgetSessionDimension&&(a["dimension"+t.customWidgetSessionDimension]=i),window[t.dataLayer]&&window[t.dataLayer].push(a)}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){if(t.eventATCAction){var e={event:t.eventName,eventAction:t.eventATCAction,nonInteraction:1};t.eventCategory&&(e.eventCategory=t.eventCategory),t.ecommerceFetcher&&(e={event:t.eventATCAction,ecommerce:t.ecommerceFetcher()}),window[t.dataLayer]&&window[t.dataLayer].push(e)}},trackOrder:function(e){return!1},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="GoogleAnalytics",n="GoogleOptimize";e.state.plugins[t]=function(t,i){var o=!1;t=t||{};var a="tng_"+e.config.retailer.replace(/[^0-9a-z]/gi,"_"),r="tangiblee",s={disableCallerEvents:!1,trackingId:!1,inPageAnalytics:!1,trackerName:t.useCustomerTrackingId?a:r,page:!1,useCustomerTrackingId:!1,googleAnalyticsObject:!1,ecommerceTracking:!t.useCustomerTrackingId,enhancedEcommerce:!1,runExperiment:!1,forceGaScriptInjecting:!1,customTangibleeDimension:1,customWidgetDimension:2,customWidgetSessionDimension:3,customTangibleeSessionDimension:4,customTangibleeUserDimension:5,customTangibleeFlowDimension:6,isAvailable:!1,isManualActivation:!1,flowATCDependandStep:4,clientEventsPrefix:t.useCustomerTrackingId?"Tangiblee Experience":"Client",sendHitLog:!1,additionDimensions:[]};for(var c in s)t[c]="undefined"!=typeof t[c]?t[c]:s[c];var l="",u=function(e){var t=new Date,n=t.getFullYear(),i=t.getMonth()+1,o=t.getDate(),a=t.getHours(),r=t.getMinutes(),s=t.getSeconds(),c=Math.floor(t.getMilliseconds()/100);return""+e+"-"+n+"-"+i+"-"+o+"T"+a+":"+r+":"+s+":"+c},d=function(){return t.isAvailable&&!t.isAvailable()?function(){}:"function"==typeof t.googleAnalyticsObject?t.googleAnalyticsObject():window[t.googleAnalyticsObject||"ga"]},g=function(e){if(t.forceGaScriptInjecting&&"function"!=typeof t.googleAnalyticsObject&&!d()){window[t.googleAnalyticsObject||"ga"]=function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date;var n=document.createElement("script"),i=document.getElementsByTagName("script")[0];return n.async=1,n.src="https://www.google-analytics.com/analytics.js",n.onload=function(){e()},void i.parentNode.insertBefore(n,i)}if(d())e();else var o=setInterval(function(){d()&&(clearInterval(o),e())},500)},f=function(){if(l=""===t.trackerName?"":t.trackerName+".",!t.inPageAnalytics){var n={name:t.trackerName,cookieDomain:t.useCustomerTrackingId?"auto":document.location.hostname};if(t.useCustomerTrackingId||(n.cookieName="_ga_tng",n.cookieExpires=31536e3,n.cookieFlags="SameSite=None; Secure",e.state.userId&&(n.clientId=e.state.userId.split(";")[0])),d()("create",t.trackingId,n),t.sendHitLog){var i=function(t,n){var i=t.get("sendHitTask");t.set("sendHitTask",function(t){i(t);var n=decodeURIComponent(t.get("hitPayload"));if(n.indexOf("Client Impression")>-1||n.indexOf("Client Open")>-1){var o=n.indexOf("Client Impression")>-1?"Client Impression":"Client Open",a=new Date(new Date-e.state.timeDelta).toISOString(),r="https://anapi.tangiblee.com/api/Register/LogEvent?Domain="+e.config.retailer+"&EventAction="+encodeURIComponent(o)+"&Category="+encodeURIComponent(e.config.product.category+" - "+e.config.product.categoryId)+"&ExternId="+e.config.product.id+(e.state.userId?"&User="+encodeURIComponent(e.state.userId):"")+"&eventTime="+encodeURIComponent(a)+"&Origin=sendHitTask";e.utils.http.fetch(r,"POST")}})};d()("provide","localHitSender",i),d()(l+"require","localHitSender")}d()(l+"set","anonymizeIp",!0),t.page&&d()(l+"set","page",t.page)}t.ecommerceTracking&&(t.enhancedEcommerce?d()(l+"require","ec"):d()(l+"require","ecommerce"))},m=function(e){d()(l+"require",e.optimizeContainerId);var t=e.customDataLayerObject||window.dataLayer||[],i=function(){t.push(arguments)},o=function(t){e.onExperimentReady(n,t)};i("event","optimize.callback",{name:e.optimizeExperimentId,callback:o})},p=!0,v=function(n,i,o,a,r,s){!t.useCustomerTrackingId&&p&&(p=!1,d()(l+"send","pageview"));var c=!!t.nonInteractionAlwaysTrue||!r,u="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId;(t.inPageAnalytics||t.useCustomerTrackingId)&&(n="Tangiblee Experience",s||(o+=u)),e.config.isEmbed&&(o+="|isEmbed:yes"),d()(l+"send","event",n,i,o,a,{nonInteraction:c})},h=function(e){for(var n=0;n<t.additionDimensions.length;n++){var i=t.additionDimensions[n],o=i.slot,a=i.dimensionValue;d()(l+"set","dimension"+o,a)}for(var n=0;n<e.length;n++){var i=e[n];if(i.slot){var o=i.slot,a=i.dimensionValue;d()(l+"set","dimension"+o,a)}}},y=function(){t.useCustomerTrackingId&&g(function(){if(f(),e.mailBox[i])for(var t=0;t<e.mailBox[i].length;t++)e.mailBox[i][t]();o=!0,e.mailBox[i]=[]})};return t.isManualActivation||y(),{_unique_id:t._unique_id,activate:function(){y()},isReady:function(){return o},setExperiment:function(e){e.provider===n&&t.runExperiment&&m(e)},trackImpression:function(){h([{slot:t.customTangibleeDimension,dimensionValue:e.config.variation},{slot:t.customTangibleeSessionDimension,dimensionValue:e.config.variation},{slot:t.customTangibleeUserDimension,dimensionValue:e.state.userId.split(";")[0]}]),v(e.config.product.category+" - "+e.config.product.categoryId,t.clientEventsPrefix+" Impression",e.config.product.label,1,!1)},trackWidgetOpen:function(){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n;h([{slot:t.customWidgetDimension,dimensionValue:i},{slot:t.customWidgetSessionDimension,dimensionValue:i}]),v(e.config.product.category+" - "+e.config.product.categoryId,t.clientEventsPrefix+" Open",e.config.product.label,1,!0)},trackWidgetClose:function(){return!1},trackATCClick:function(){v(e.config.product.category+" - "+e.config.product.categoryId,t.clientEventsPrefix+" ATC",e.config.product.label,1,!0)},trackATCWidgetClick:function(){v(e.config.product.category+" - "+e.config.product.categoryId,t.clientEventsPrefix+" ATC Widget",e.config.product.label,1,!0)},trackOrder:function(n){if(!t.inPageAnalytics){v("Order Tracking",t.clientEventsPrefix+" Conversion",e.state.userId,n&&n.total||1,!1),n.id=n.id||u(e.config.variation);var i,o;if(t.enhancedEcommerce){for(d()(l+"set","currencyCode",n.currency||"USD"),i=0;i<n.items.length;i++)o=n.items[i],d()(l+"ec:addProduct",{id:o.sku||o.name,name:o.name,category:o.category||"",price:o.price,quantity:o.qty});d()(l+"ec:setAction","purchase",{id:n.id,affiliation:e.config.retailer,revenue:n.total})}else{for(d()(l+"ecommerce:addTransaction",{id:n.id,affiliation:e.config.retailer,revenue:n.total,currency:n.currency||"USD"}),i=0;i<n.items.length;i++)o=n.items[i],d()(l+"ecommerce:addItem",{id:n.id,name:o.name,sku:o.sku||o.name,category:o.category||"",price:o.price,quantity:o.qty,currency:n.currency||"USD"});d()(l+"ecommerce:send")}v("Tracking","Order",n.id,Math.round(n.total),!1)}},trackCustomEvent:function(n){var i=t.inPageAnalytics||t.useCustomerTrackingId;if(!i||!n.tngGAOnly){var o=!n.retailer_additional_dims||n.retailer_additional_dims&&i;if(o&&n.dimensions){for(var a=[],r=0;r<n.dimensions.length;r++)a.push({slot:n.dimensions[r].index,dimensionValue:n.dimensions[r].value});h(a)}v(n.category||e.config.product.category+" - "+e.config.product.categoryId,n.action,n.label,n.value||1,n.isInteraction,!0)}},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="GoogleAnalytics4",n="GoogleOptimize";e.state.plugins[t]=function(t,i){function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function a(){clearTimeout(t.timer),t.timer=setTimeout(function(){c(),t.timer=null},3e4)}function r(){window[t.currentDataLayerName].push(arguments)}function s(){t.isCustomerGA&&t.gtmConfig.enabled&&!t.isGTMPingEnable||(t.isCustomerGA?t.isCustomerGA&&(t.clientIntervalId&&clearInterval(t.clientIntervalId),t.clientIntervalId=setInterval(function(){var n={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_scope:"widget"};l("event",t.eventPingAction,n)},5e3)):(t.tngIntervalId&&clearInterval(t.tngIntervalId),t.tngIntervalId=setInterval(function(){var n={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_scope:"widget"};l("event",t.eventPingAction,n)},5e3)))}function c(){t.isCustomerGA&&t.clientIntervalId?clearInterval(t.clientIntervalId):!t.isCustomerGA&&t.tngIntervalId&&clearInterval(t.tngIntervalId)}function l(e,n,i){if(t.gtmConfig.enabled){if("js"===e||"config"===e||"set"===e)return;var o=i;switch(o.event_action=n,n){case"tng_impressed_direct":o.event=t.gtmConfig.events.impressed;break;case"tng_interacted_direct":o.event=t.gtmConfig.events.interacted;break;case"tng_session_pinged_direct":o.event="tng_session_pinged"}o.send_to&&delete o.send_to,window[t.currentDataLayerName].push(o)}else window[t.currentDataLayerName].push(arguments)}var u=!1;t=t||{};var d={isDebugMode:!1,trackingId:!1,isFirstImpression:!0,eventImpressionAction:"tng_impressed_direct",eventFirstImpressionAction:"tng_first_cta_displayed_direct",eventOpenAction:"tng_interacted_direct",eventATCAction:"tng_item_added_to_cart_direct",eventTYPVisitAction:"tng_thank_you_page_visited_direct",eventPingAction:"tng_session_pinged_direct",eventPurchase:"purchase",isAvailable:!0,ecommerceTracking:!0,currentDataLayerName:"tngDataLayer",isManualActivation:!1,isFirstOpen:!0,cookieLastOpenWidget:"tangiblee_widget_open_last_date",gtagConfig:{debug_mode:t.isDebugMode||!1},sendGAEventsDirectly:!0,sendReducedEventSetToClientGA:!0,isCustomerGA:!1,runExperiment:!1,gtmConfig:{enabled:!1,events:{impressed:"tng_impressed",interacted:"tng_interacted"}},isGTMPingEnable:!1,timer:null,isWidgetOpen:!1,tngIntervalId:null,clientIntervalId:null,isDisabledConfigEvent:!1,tng_mode:""};for(var g in d)t[g]="undefined"!=typeof t[g]?t[g]:d[g];window[t.currentDataLayerName]=window[t.currentDataLayerName]||[];var f=function(t,n,i){var o=new Date(new Date-e.state.timeDelta).toISOString(),a="https://anapi.tangiblee.com/api/v2/collect/event?"+(t?"sku="+t:"")+"&domain="+e.config.retailer+"&eventTime="+encodeURIComponent(o)+(n?"&gaEventName="+n:"")+(i?"&params[extern_id_variation]="+i:"");return a},m=function(){if(t.isCustomerGA)t.isDisabledConfigEvent||l("config",t.trackingId,{send_page_view:!1});else{var e=document.createElement("script"),n=document.getElementsByTagName("script")[0];e.async=1,e.src="https://www.googletagmanager.com/gtag/js?id="+t.trackingId+"&l="+t.currentDataLayerName,n.parentNode.insertBefore(e,n),l("js",new Date),l("config",t.trackingId,t.gtagConfig)}},p=function(){if(m(),e.mailBox[i])for(var t=0;t<e.mailBox[i].length;t++)e.mailBox[i][t]();u=!0,e.mailBox[i]=[]};return!t.isManualActivation&&t.sendGAEventsDirectly&&p(),{isReady:function(){return u},activate:function(){t.sendGAEventsDirectly&&p()},setExperiment:function(e){if(e.provider===n&&t.runExperiment){var i=document.createElement("script"),o=document.getElementsByTagName("script")[0];i.async=1,i.onload=function(){var i=function(t){e.onExperimentReady(n,t)};r("event","optimize.callback",{name:e.optimizeExperimentId,callback:i}),window[t.currentDataLayerName].push({event:"tng.activate"})},i.src="https://www.googleoptimize.com/optimize.js?id="+e.optimizeContainerId+"&l="+t.currentDataLayerName,
o.parentNode.insertBefore(i,o)}},trackImpression:function(n){var i=e.utils.storage.getCookie(t.cookieLastOpenWidget),o=new Date-e.state.timeOfInit,a={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"hit",tng_widget_container:e.config.isEmbed?"embed":"popup"},r={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_scope:"page",tng_widget_container:e.config.isEmbed?"embed":"popup",tng_metric:o};if(i&&(a.tng_interacted_last_date=i),l("set","user_properties",{tng_user_is_on:e.config.variationGA4}),l("event",t.eventImpressionAction,a),t.isFirstImpression){var s=[],c=0;if(n.forEach(function(n){if(c<=1700)s.push(n),c+=n.length;else if(c>1700&&!t.isCustomerGA){var i=f(s.join(),"tng_impressed",null);e.utils.http.fetch(i,"POST"),c=0,s=[],s.push(n),c+=n.length}}),c>0&&!t.isCustomerGA){var u=f(s.join(),"tng_impressed",null);e.utils.http.fetch(u,"POST")}t.isCustomerGA||l("event",t.eventFirstImpressionAction,r),t.isFirstImpression=!1}},trackWidgetOpen:function(){t.isWidgetOpen=!0;var n=(new Date).toISOString().substring(0,10),i=n,o={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"hit",tng_widget_container:e.config.isEmbed?"embed":"popup"},r={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"page",tng_widget_container:e.config.isEmbed?"embed":"popup"};t.gtmConfig.enabled&&(o.tng_user_interacted_date=i),l("set","user_properties",{tng_user_interacted_date:i}),l("event",t.eventOpenAction,o),t.isFirstOpen&&(l("event",t.eventOpenAction,r),t.isFirstOpen=!1),e.utils.storage.setCookie(t.cookieLastOpenWidget,i),null===t.timer&&s(),a()},trackWidgetClose:function(){t.isWidgetOpen=!1,c(),clearTimeout(t.timer),t.timer=null},trackATCClick:function(){var n={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"page",tng_widget_container:e.config.isEmbed?"embed":"popup"};t.tng_mode&&(n.tng_mode=t.tng_mode),l("event",t.eventATCAction,n)},trackATCWidgetClick:function(n){null===t.timer&&s(),a();var i={send_to:t.trackingId,tng_sku:e.config.product.id,tng_sku_category_name:e.config.product.category,tng_sku_category_id:""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"widget",tng_widget_container:e.config.isEmbed?"embed":"popup"};t.tng_mode&&(i.tng_mode=t.tng_mode),n.atcTitle&&(t.atcTitle=n.atcTitle,i.tng_cta_title=n.atcTitle),n.variants&&n.variants.length>0&&(i.tng_items_ids=n.variants.join()),l("event",t.eventATCAction,i)},trackOrder:function(n){if(t.ecommerceTracking){for(var i=[],a=0;a<n.items.length;a++){var r=n.items[a],s={item_id:r.sku,item_name:r.name,price:r.price,quantity:r.qty};i.push(s)}l("event",t.eventPurchase,{send_to:t.trackingId,currency:n.currency,transaction_id:n.id||o(e.config.variationGA4),items:i,value:n.total})}},trackCustomEvent:function(n){if(!t.isCustomerGA||!n.tngGAOnly){var i={send_to:t.trackingId};if("TYP Visit"!==n.action&&(i.tng_is_on=e.config.variationGA4,n.sendDefaultParams&&(i.tng_sku=e.config.product.id,i.tng_sku_category_name=e.config.product.category,i.tng_sku_category_id=""+e.config.product.categoryId,i.tng_scope="hit",i.tng_widget_container=e.config.isEmbed?"embed":"popup")),n.dimensions)for(var o=0;o<n.dimensions.length;o++)i[n.dimensions[o].index]=n.dimensions[o].value;return"TYP Visit"===n.action?void l("event",t.eventTYPVisitAction,i):void l("event",n.action,i)}},trackWidgetEvent:function(n){if(!(t.isCustomerGA&&t.gtmConfig.enabled||t.isCustomerGA&&t.sendReducedEventSetToClientGA)){"tng_mode_switched"===n.eventName&&(t.tng_mode=n.dimension?n.dimension:""),null===t.timer&&t.isWidgetOpen&&s(),t.isWidgetOpen&&a();var i={send_to:t.trackingId,tng_sku:n.product&&n.product.id||e.config.product.id,tng_sku_category_name:n.product&&n.product.category.name||e.config.product.category,tng_sku_category_id:n.product&&n.product.category.id||""+e.config.product.categoryId,tng_is_on:e.config.variationGA4,tng_scope:"widget",tng_widget_container:e.config.isEmbed?"embed":"popup"};if(n.item&&(n.item.name?i.tng_item_name=n.item.name:"",n.item.id?i.tng_item_id=n.item.id:""),n.dimension&&(n.dimension?i.tng_dimension=n.dimension:""),n.itemType&&(n.itemType?i.tng_item_type=n.itemType:""),("tng_item_stacked"===n.eventName||"tng_item_unstacked"===n.eventName&&n.optionalParams)&&(n.optionalParams.ids?i.tng_items_ids=n.optionalParams.ids:"",n.optionalParams.names?i.tng_items_names=n.optionalParams.names:""),n.eventName.indexOf("tng_arclip")>-1&&(n.optionalParams.time?i.tng_metric=1e3*+n.optionalParams.time:""),("tng_human_height_changed"===n.eventName||"tng_human_size_changed"===n.eventName&&n.optionalParams)&&(n.optionalParams.name?i.tng_item_type=n.optionalParams.name:""),"tng_arrow_clicked"===n.eventName&&n.optionalParams&&(i.tng_cta_title=n.optionalParams||""),"tng_engaged"===n.eventName&&!t.isCustomerGA){var o=(new Date).toISOString().substring(0,10);l("set","user_properties",{tng_user_engagement_date:o})}l("event",n.eventName,i)}},trackImpressionOnJewelryConfigurators:function(t){var n=t.variation?t.variation:"",i=f(e.config.product.id,"tng_impressed",n);e.utils.http.fetch(i,"POST")}}}}(),function(){var t="GoogleClientAnalytics",n="GoogleOptimize";e.state.plugins[t]=function(t,i){var o=!1;t=t||{};var a={trackingId:!1,inPageAnalytics:!1,trackerName:"tng",useCustomerTrackingId:!1,googleAnalyticsObject:!1,runExperiment:!1,forceGaScriptInjecting:!1,customTangibleeDimension:1,customWidgetDimension:2,customWidgetSessionDimension:3,customTangibleeSessionDimension:4,customTangibleeUserDimension:5,customTangibleeFlowDimension:6,isAvailable:!1,isManualActivation:!1,eventsCategory:"Tangiblee Experience",eventsImpressionAction:"Impression",eventsOpenAction:"Open",eventsATCAction:"Add To Cart"};for(var r in a)t[r]="undefined"!=typeof t[r]?t[r]:a[r];var s="",c=function(){return t.isAvailable&&!t.isAvailable()?function(){}:"function"==typeof t.googleAnalyticsObject?t.googleAnalyticsObject():window[t.googleAnalyticsObject||"ga"]},l=function(e){if(t.forceGaScriptInjecting&&"function"!=typeof t.googleAnalyticsObject&&!c()){window[t.googleAnalyticsObject||"ga"]=function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date;var n=document.createElement("script"),i=document.getElementsByTagName("script")[0];return n.async=1,n.src="https://www.google-analytics.com/analytics.js",n.onload=function(){e()},void i.parentNode.insertBefore(n,i)}if(c())e();else var o=setInterval(function(){c()&&(clearInterval(o),e())},500)},u=function(){if(s=""===t.trackerName?"":t.trackerName+".",!t.inPageAnalytics){var n={name:t.trackerName,cookieDomain:t.useCustomerTrackingId?"auto":document.location.hostname};t.useCustomerTrackingId||(n.cookieName="_ga_tng",n.cookieExpires=31536e3,n.cookieFlags="SameSite=None; Secure",e.state.userId&&(n.clientId=e.state.userId.split(";")[0])),c()("create",t.trackingId,n),c()(s+"set","anonymizeIp",!0)}},d=function(e){c()(s+"require",e.optimizeContainerId);var t=e.customDataLayerObject||window.dataLayer||[],i=function(){t.push(arguments)},o=function(t){e.onExperimentReady(n,t)};i("event","optimize.callback",{name:e.optimizeExperimentId,callback:o})},g=!0,f=function(n,i,o,a,r,l){!t.useCustomerTrackingId&&g&&(g=!1,c()(s+"send","pageview"));var u=!!t.nonInteractionAlwaysTrue||!r,d="|cn:"+e.config.product.category+"|cid:"+e.config.product.categoryId;l||(o+=d),c()(s+"send","event",n,i,o,a,{nonInteraction:u})},m=function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(i.slot){var o=i.slot,a=i.dimensionValue;c()(s+"set","dimension"+o,a),t+="dimension"+o+"-"+a+";"}}},p=function(){l(function(){if(u(),e.mailBox[i])for(var t=0;t<e.mailBox[i].length;t++)e.mailBox[i][t]();o=!0,e.mailBox[i]=[]})};return t.isManualActivation||p(),{_unique_id:t._unique_id,activate:function(){p()},isReady:function(){return o},setExperiment:function(e){e.provider===n&&t.runExperiment&&d(e)},trackImpression:function(){m([{slot:t.customTangibleeDimension,dimensionValue:e.config.variation},{slot:t.customTangibleeSessionDimension,dimensionValue:e.config.variation},{slot:t.customTangibleeUserDimension,dimensionValue:e.state.userId.split(";")[0]}]),f(t.eventsCategory,t.eventsImpressionAction,e.config.product.category,1,!1)},trackWidgetOpen:function(){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n;m([{slot:t.customWidgetDimension,dimensionValue:i},{slot:t.customWidgetSessionDimension,dimensionValue:i}]),f(t.eventsCategory,t.eventsOpenAction,e.config.product.category,1,!1)},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){f(t.eventsCategory,t.eventsATCAction,e.config.product.category,1,!1)},trackOrder:function(e){return!1},trackCustomEvent:function(e){var n=t.inPageAnalytics||t.useCustomerTrackingId,i=!e.retailer_additional_dims||e.retailer_additional_dims&&n;if(i&&e.dimensions){for(var o=[],a=0;a<e.dimensions.length;a++)o.push({slot:e.dimensions[a].index,dimensionValue:e.dimensions[a].value});m(o)}f(e.category,e.action,e.label,e.value||1,!1,!0)},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="InfoPortalAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={analyticsUrl:"https://info.tangiblee.com",trackingId:!1,isManualActivation:!1};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];e.config.trackingIdForIP=t.trackingId;var r=function(){};t.isManualActivation||r();var s=function(e){if(t.trackingId){var n=t.trackingId(),i=[];for(var o in n)i.push(e);e=i.join(";")}return e},c=function(){if(!t.trackingId)return"";var e=t.trackingId(),n=[];for(var i in e)e[i]&&n.push(i);return n.length>0?"&trackingId="+n.join(","):""},l=function(n){var i=e.state.buttonDisplayedAt-e.state.timeOfInit,o=t.analyticsUrl+"/api/registertimetobutton/"+n+"?domain="+encodeURIComponent(e.config.retailer)+(e.state.userId?"&user="+encodeURIComponent(s(e.state.userId)):"")+"&time="+i+c();e.utils.http.fetch(o,"POST")};return{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){r()},setExperiment:function(){return!1},trackImpression:function(n){e.state.buttonDisplayedAt=new Date;var i=t.analyticsUrl+"/api/regimpr?ids="+n.join()+"&domain="+e.config.retailer+"&platformType=auto"+(e.state.userId?"&user="+encodeURIComponent(s(e.state.userId)):"")+("1"===e.utils.getParam("xtng_fake")?"&fake=suppressimpression":"")+c();e.utils.http.fetch(i,"POST"),l(n[0])},trackWidgetOpen:function(){var n=e.state.buttonDisplayedAt?new Date-e.state.buttonDisplayedAt:0;e.state.buttonDisplayedAt=null;var i=t.analyticsUrl+"/api/RegisterOpen/"+encodeURIComponent(e.config.product.id)+"?domain="+e.config.retailer+"&timeToOpen="+n+(e.state.userId?"&user="+encodeURIComponent(s(e.state.userId)):"")+c();e.utils.http.fetch(i,"POST"),e.utils.storage.setLS("tangiblee:widget:opened","true")},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(e){return!1},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="InfoPortalAnalyticsForGA4";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={analyticsUrl:"https://anapi.tangiblee.com/",eventDefaultEndpoint:"api/v2/collect/event?",trackingId:!1,isManualActivation:!1,eventImpressionAction:"tng_impressed",eventFirstImpressionAction:"tng_first_cta_displayed",eventOpenAction:"tng_interacted",eventATCAction:"tng_item_added_to_cart",isFirstOpen:!0,isFirstImpression:!0,connectedClientGA:!1,cookieLastOpenWidget:"tangiblee_widget_open_last_date",sendGAEventsViaInfoPortal:!0,userId:""};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=null,s=function(){if(t.userId=e.state.userId,e.utils.setSessionId(t.trackingId),e.utils.setSessionCount(t.trackingId),e.utils.setSessionEngaged(t.trackingId),e.config.useAnalyticsCookies&&t.userId.split(";").length>1?t.userId=t.userId.split(";")[1]:t.userId=t.userId.split(";")[0],e.mailBox[n])for(var o=0;o<e.mailBox[n].length;o++)e.mailBox[n][o]();i=!0,e.mailBox[n]=[]};!t.isManualActivation&&t.sendGAEventsViaInfoPortal&&s();var c=function(t){for(var n="",i=0;i<t.length;i++){var o=t[i];if(o.eventDimensionName){var a=o.eventDimensionName,r=decodeURIComponent(o.eventDimensionValue);e.state.customDimensions[a]=r,n+="&gaEventDimensions["+a+"]="+r}}return n},l=function(t){for(var n="",i=0;i<t.length;i++){var o=t[i];if(o.eventDimensionName){var a=o.eventDimensionName,r=decodeURIComponent(o.eventDimensionValue);e.state.customDimensions[a]=r,n+="&gaUserDimensions["+a+"]="+r}}return n},u=function(t){for(var n="",i=0;i<t.length;i++){var o=t[i];if(o.eventMetricName){var a=o.eventMetricName,r=decodeURIComponent(o.eventMetricValue);e.state.customMetrics[a]=r,n+="&gaEventMetrics["+a+"]="+r}}return n},d=function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];i&&(t+="&params["+i.name+"]="+i.value)}return t},g=function(n,i,o,a,s,c){r=new Date(new Date-e.state.timeDelta).toISOString();var l=t.analyticsUrl+t.eventDefaultEndpoint+(n?"sku="+n:"")+"&domain="+e.config.retailer+(t.userId?"&gaUserId="+t.userId:"")+(e.state.sessionId?"&gaSessionId="+e.state.sessionId:"")+(e.state.sessionCount?"&gaSessionCount="+e.state.sessionCount:"")+(e.state.sessionEngaged?"&gaSessionEngaged="+e.state.sessionEngaged:"")+(s?s:"")+"&eventTime="+encodeURIComponent(r)+(i?"&gaEventName="+i:"")+(o?o:"")+(c?c:"")+(a?a:"")+(document.URL?"&pageUrl="+document.URL:"")+(document.referrer?"&referrer="+document.referrer:"");return l},f=function(n,i,o,a,s){r=new Date(new Date-e.state.timeDelta).toISOString();var c=t.analyticsUrl+t.eventDefaultEndpoint+(n?"gaEventName="+n:"")+(i&&i.id?"&sku="+encodeURIComponent(i.id):e.config.product.id?"&sku="+encodeURIComponent(e.config.product.id):"")+"&gaEventDimensions[tng_scope]=widget"+(i&&i.id?"&gaEventDimensions[tng_sku]="+encodeURIComponent(i.id):"")+(i&&i.category.name?"&gaEventDimensions[tng_sku_category_name]="+encodeURIComponent(i.category.name):"")+(i&&i.category.id?"&gaEventDimensions[tng_sku_category_id]="+encodeURIComponent(i.category.id):"")+(o&&o.name?"&gaEventDimensions[tng_item_name]="+encodeURIComponent(o.name):"")+(o&&o.id?"&gaEventDimensions[tng_item_id]="+encodeURIComponent(o.id):"")+(e.config.isEmbed?"&gaEventDimensions[tng_widget_container]=embed":"&gaEventDimensions[tng_widget_container]=popup")+(a?"&gaEventDimensions[tng_dimension]="+encodeURIComponent(a):"")+(s?"&gaEventDimensions[tng_item_type]="+encodeURIComponent(s):"")+"&domain="+e.config.retailer+(t.userId?"&gaUserId="+t.userId:"")+(e.state.sessionId?"&gaSessionId="+e.state.sessionId:"")+(e.state.sessionCount?"&gaSessionCount="+e.state.sessionCount:"")+(e.state.sessionEngaged?"&gaSessionEngaged="+e.state.sessionEngaged:"")+"&eventTime="+encodeURIComponent(r)+(document.referrer?"&referrer="+document.referrer:"")+(document.URL?"&pageUrl="+document.URL:"");return c};return{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){t.sendGAEventsViaInfoPortal&&s()},setExperiment:function(){return!1},trackImpression:function(n){for(var i=[],o=0;o<n.length;o++)n[o]&&i.push(n[o]);if(0!==i.length){var a=e.utils.storage.getCookie(t.cookieLastOpenWidget),r=[{eventDimensionName:"tng_is_on",eventDimensionValue:e.config.variationGA4},{eventDimensionName:"tng_scope",eventDimensionValue:"hit"},{eventDimensionName:"tng_interacted_last_date",eventDimensionValue:a},{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],s=[{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],f=[{eventDimensionName:"tng_user_is_on",eventDimensionValue:e.config.variationGA4}],m=new Date-e.state.timeOfInit,p=[{eventMetricName:"tng_metric",eventMetricValue:m}],v=[];"debug"===e.utils.getParam("xtng_fake")&&v.push({name:"fake",value:"debug"}),"1"===e.utils.getParam("xtng_fake")&&v.push({name:"fake",value:"suppressimpression"});var h=g(encodeURIComponent(i.join()),t.eventImpressionAction,c(r),null,d(v),l(f)),y=g(encodeURIComponent(i.join()),t.eventFirstImpressionAction,c(s),u(p),d(v),l(f));e.utils.http.fetch(h,"POST"),t.isFirstImpression&&(e.utils.http.fetch(y,"POST"),t.isFirstImpression=!1)}},trackWidgetOpen:function(){if(e.config.product.id){var n=(new Date).toISOString().substring(0,10),i=n,o=[{eventDimensionName:"tng_is_on",eventDimensionValue:e.config.variationGA4},{eventDimensionName:"tng_scope",eventDimensionValue:"hit"},{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],a=[{eventDimensionName:"tng_user_interacted_date",eventDimensionValue:i}],r=[{eventDimensionName:"tng_is_on",eventDimensionValue:e.config.variationGA4},{eventDimensionName:"tng_scope",eventDimensionValue:"page"},{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],s=[];"debug"===e.utils.getParam("xtng_fake")&&s.push({name:"fake",value:"debug"});var u=g(encodeURIComponent(e.config.product.id),t.eventOpenAction,c(o),null,d(s),l(a)),f=g(encodeURIComponent(e.config.product.id),t.eventOpenAction,c(r),null,d(s),l(a));e.utils.http.fetch(u,"POST"),t.isFirstOpen&&(e.utils.http.fetch(f,"POST"),t.isFirstOpen=!1),e.utils.storage.setCookie(t.cookieLastOpenWidget,i)}},trackWidgetClose:function(){return!1},trackATCClick:function(){if(e.config.product.id){var n=[{eventDimensionName:"tng_scope",eventDimensionValue:"page"},{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],i=[];"debug"===e.utils.getParam("xtng_fake")&&i.push({name:"fake",value:"debug"});var o=g(encodeURIComponent(e.config.product.id),t.eventATCAction,c(n),null,d(i));e.utils.http.fetch(o,"POST")}},trackATCWidgetClick:function(){if(e.config.product.id){var n=[{eventDimensionName:"tng_scope",eventDimensionValue:"widget"},{eventDimensionName:"tng_sku",eventDimensionValue:e.config.product.id},{eventDimensionName:"tng_sku_category_name",eventDimensionValue:e.config.product.category},{eventDimensionName:"tng_sku_category_id",eventDimensionValue:e.config.product.categoryId},{eventDimensionName:"tng_widget_container",eventDimensionValue:e.config.isEmbed?"embed":"popup"}],i=[];"debug"===e.utils.getParam("xtng_fake")&&i.push({name:"fake",value:"debug"});var o=g(encodeURIComponent(e.config.product.id),t.eventATCAction,c(n),null,d(i));e.utils.http.fetch(o,"POST")}},trackOrder:function(e){return!1},trackCustomEvent:function(t){var n=[];"debug"===e.utils.getParam("xtng_fake")&&n.push({name:"fake",value:"debug"}),g(encodeURIComponent(e.config.product.id),t.action,t.label,null,d(n))},trackWidgetEvent:function(t){var n=f(t.eventName,t.product,t.item,t.dimension,t.itemType);e.utils.http.fetch(n,"POST")},trackImpressionOnJewelryConfigurators:function(n){var i=n.variation?"&params[extern_id_variation]="+n.variation:"",o=g(encodeURIComponent(n.sku)||encodeURIComponent(e.config.product.id),t.eventImpressionAction,null,null,i,null);e.utils.http.fetch(o,"POST")}}}}(),function(){var t="InfoPortalAnalyticsV2";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={analyticsUrl:"https://anapi.tangiblee.com",trackingId:!1,isManualActivation:!1,customTangibleeDimension:1,customWidgetDimension:2,customMethodCall:!1,firstCall:!0,isGA360:!1};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];e.config.trackingIdForIP=t.trackingId;var r=null,s=function(){if(t.isGA360){if(e.mailBox[n])for(var o=0;o<e.mailBox[n].length;o++)e.mailBox[n][o]();i=!0,e.mailBox[n]=[]}};t.isManualActivation||s();var c=function(e){if(t.trackingId){var n=t.trackingId(),i=[];for(var o in n)i.push(e);e=i.join(";")}return e},l=function(){if(!t.trackingId)return"";var e=t.trackingId(),n=[];for(var i in e)e[i]&&n.push(i);return n.length>0?"&trackingId="+n.join(","):""},u=function(){e.state.registerSessionIntervalIdForGA3&&clearInterval(e.state.registerSessionIntervalIdForGA3),e.state.registerSessionIntervalIdForGA3=setInterval(function(){if(r=new Date(new Date-e.state.timeDelta).toISOString(),e.config.product.id){var n=t.analyticsUrl+"/api/Register/Ping?id="+encodeURIComponent(e.config.product.id)+"&domain="+e.config.retailer+(e.state.userId?"&user="+encodeURIComponent(c(e.state.userId)):"")+l()+"&eventTime="+encodeURIComponent(r);e.utils.http.fetch(n,"POST")}},5e3)},d=function(){e.state.registerSessionIntervalIdForGA3&&clearInterval(e.state.registerSessionIntervalIdForGA3)},g=function(n){if(t.firstCall){r=new Date(new Date-e.state.timeDelta).toISOString();var i=e.state.buttonDisplayedAt-e.state.timeOfInit,o=t.analyticsUrl+"/api/Register/TimeToButton?id="+n+"&domain="+encodeURIComponent(e.config.retailer)+(e.state.userId?"&user="+encodeURIComponent(c(e.state.userId)):"")+"&time="+i+l()+"&eventTime="+encodeURIComponent(r);e.utils.http.fetch(o,"POST")}},f=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.slot){var o=i.slot,a=decodeURIComponent(i.dimensionValue);e.state.customDimensions[o]=a}}},m=function(){var t=[],n=[];for(var i in e.state.customDimensions)t.push(i),n.push(e.state.customDimensions[i]);return t.length>0?"&cdi="+t.join()+"&cdv="+n.join():""},p=function(){var t="";return window.screen&&(t+="&sr="+window.screen.width+"x"+window.screen.height),t+="&vp="+window.innerWidth+"x"+window.innerHeight,t+="&ul="+navigator.language||navigator.userLanguage,t+="&de="+document.characterSet,t+="&dc="+(e.utils.isItTablet()?"tablet":e.utils.isItMobileOrTablet()?"mobile":"desktop")};return{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){s(),e.utils.storage.removeCookie(e.config.cookieCDKey)},setExperiment:function(){return!1},trackImpression:function(n){r=new Date(new Date-e.state.timeDelta).toISOString();for(var i=[],o=0;o<n.length;o++)n[o]&&i.push(n[o]);if(0!==i.length){e.state.buttonDisplayedAt=new Date,f([{slot:t.customTangibleeDimension,dimensionValue:e.config.variation}]);var a=t.analyticsUrl+"/api/Register/Impression?id="+i.join()+"&domain="+e.config.retailer+(e.state.userId?"&user="+encodeURIComponent(c(e.state.userId)):"")+("1"===e.utils.getParam("xtng_fake")?"&fake=suppressimpression":"")+m()+p()+l()+"&eventTime="+encodeURIComponent(r);e.utils.http.fetch(a,"POST"),g(i[0]),t.firstCall=!1}},trackWidgetOpen:function(){if(e.config.product.id){r=new Date(new Date-e.state.timeDelta).toISOString();var n=e.state.buttonDisplayedAt?new Date-e.state.buttonDisplayedAt:0;e.state.buttonDisplayedAt=null;var i=(new Date).toISOString().substring(0,10),o="Widget Opened "+i;f([{slot:t.customWidgetDimension,dimensionValue:o}]);var a=t.analyticsUrl+"/api/Register/Open?id="+encodeURIComponent(e.config.product.id)+"&domain="+e.config.retailer+"&timeToOpen="+n+(e.state.userId?"&user="+encodeURIComponent(c(e.state.userId)):"")+m()+p()+l()+"&eventTime="+encodeURIComponent(r);e.utils.http.fetch(a,"POST"),e.utils.storage.setLS("tangiblee:widget:opened","true"),u()}},trackWidgetClose:function(){d()},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(e){return!1},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="InfoPortalAnalyticsV3";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={analyticsUrl:"https://anapi.tangiblee.com",trackingId:!1,isManualActivation:!1,customTangibleeDimension:1,customWidgetDimension:2,customWidgetSessionDimension:3,customTangibleeSessionDimension:4,customTangibleeUserDimension:5,eventDefaultEndpoint:"/api/register/event"};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];e.config.trackingIdForIP=t.trackingId;var r=null,s=function(){};t.isManualActivation||s();var c=function(){if(!t.trackingId)return"";var e=t.trackingId(),n=[];for(var i in e)e[i]&&n.push(i);return n.length>0?"&trackingId="+n.join(","):""},l=function(n){r=new Date(new Date-e.state.timeDelta).toISOString();var i=e.state.buttonDisplayedAt-e.state.timeOfInit,o=t.analyticsUrl+"/api/Register/TimeToButton?id="+n+"&domain="+encodeURIComponent(e.config.retailer)+"&user="+e.state.userId+"&time="+i+c()+"&eventTime="+encodeURIComponent(r);e.utils.http.fetch(o,"POST")},u=function(t){for(var n="",i=0;i<t.length;i++){var o=t[i];if(o.slot){var a=o.slot,r=decodeURIComponent(o.dimensionValue);e.state.customDimensions[a]=r,n+="&dims["+a+"]="+r}}return n},d=function(n,i,o,a){r=new Date(new Date-e.state.timeDelta).toISOString();var s=t.analyticsUrl+t.eventDefaultEndpoint+(n?"?id="+n:"")+"&domain="+e.config.retailer+"&user="+e.state.userId+(t.trackingId?"&trackingId="+t.trackingId:"")+"&eventTime="+encodeURIComponent(r)+(i?i:"")+(o?"&action="+o:"")+(a?"&label="+a:"")+(document.referrer?"&referrer="+document.referrer:"")+"&value=1&isAggregated=false";return s};return{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){s()},setExperiment:function(){return!1},trackImpression:function(n){for(var i=[],o=0;o<n.length;o++)n[o]&&i.push(n[o]);if(0!==i.length){e.state.buttonDisplayedAt=new Date;var a=[{slot:t.customTangibleeDimension,dimensionValue:e.config.useAnalyticsCookies&&e.config.useCookies?e.config.variation:e.config.variation+"|NoStorage"},{slot:t.customTangibleeSessionDimension,dimensionValue:e.config.useAnalyticsCookies&&e.config.useCookies?e.config.variation:e.config.variation+"|NoStorage"},{slot:t.customTangibleeUserDimension,dimensionValue:e.state.userId}],r=d(i.join(),u(a),"Client Impression",e.state.userId)+("1"===e.utils.getParam("xtng_fake")?"&fake=suppressimpression":"");e.utils.http.fetch(r,"POST"),l(i[0])}},trackWidgetOpen:function(){if(e.config.product.id){var n=(new Date).toISOString().substring(0,10),i="Widget Opened "+n,o=[{slot:t.customWidgetDimension,dimensionValue:i},{slot:t.customWidgetSessionDimension,dimensionValue:i}],a=d(encodeURIComponent(e.config.product.id),u(o),"Client Open",encodeURIComponent(e.config.product.id)+"-"+document.URL);e.utils.http.fetch(a,"POST")}},trackWidgetClose:function(){return!1},trackATCClick:function(){if(e.config.product.id){var t=d(encodeURIComponent(e.config.product.id),null,"Client ATC",encodeURIComponent(e.config.product.id)+"-"+document.URL);e.utils.http.fetch(t,"POST")}},trackATCWidgetClick:function(){if(e.config.product.id){var t=d(encodeURIComponent(e.config.product.id),null,"Client ATC Widget",encodeURIComponent(e.config.product.id)+"-"+document.URL);e.utils.http.fetch(t,"POST")}},trackOrder:function(e){return!1},trackCustomEvent:function(t){var n=d(encodeURIComponent(e.config.product.id),null,t.action,t.label);e.utils.http.fetch(n,"POST")},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t="logsInfoPortalAnalytics";e.state.plugins[t]=function(t,n){var i=!1;t=t||{};var o={analyticsUrl:"https://anapi.tangiblee.com",trackingId:!1,isManualActivation:!1,eventImpression:"Client Impression",eventOpen:"Client Open",cleanIds:[]};for(var a in o)t[a]="undefined"!=typeof t[a]?t[a]:o[a];var r=null,s=function(){};return t.isManualActivation||s(),{_unique_id:t._unique_id,isReady:function(){return i},activate:function(){s(),e.utils.storage.removeCookie(e.config.cookieCDKey)},setExperiment:function(){return!1},trackImpression:function(n){r=new Date(new Date-e.state.timeDelta).toISOString();for(var i=0;i<n.length;i++)n[i]&&t.cleanIds.push(n[i]);if(0!==t.cleanIds.length){var o=t.analyticsUrl+"/api/Register/LogEvent?Domain="+e.config.retailer+"&EventAction="+encodeURIComponent(t.eventImpression)+"&Category="+encodeURIComponent(e.config.product.category+" - "+e.config.product.categoryId)+"&ExternId="+t.cleanIds[0]+(e.state.userId?"&User="+encodeURIComponent(e.state.userId):"")+("1"===e.utils.getParam("xtng_fake")?"&fake=suppressimpression":"")+"&eventTime="+encodeURIComponent(r)+"&Origin=frontend";e.utils.http.fetch(o,"POST")}},trackWidgetOpen:function(){if(r=new Date(new Date-e.state.timeDelta).toISOString(),0!==t.cleanIds.length){var n=t.analyticsUrl+"/api/Register/LogEvent?Domain="+e.config.retailer+"&EventAction="+encodeURIComponent(t.eventOpen)+"&Category="+encodeURIComponent(e.config.product.category+" - "+e.config.product.categoryId)+"&ExternId="+t.cleanIds[0]+(e.state.userId?"&User="+encodeURIComponent(e.state.userId):"")+"&eventTime="+encodeURIComponent(r)+"&Origin=frontend";e.utils.http.fetch(n,"POST")}},trackWidgetClose:function(){return!1},trackATCClick:function(){return!1},trackATCWidgetClick:function(){return!1},trackOrder:function(e){return!1},trackCustomEvent:function(){return!1},trackWidgetEvent:function(e){return!1},trackImpressionOnJewelryConfigurators:function(e){return!1}}}}(),function(){var t=function(t){if(!t.id)return!1;var n=e.utils.storage.getLS("latest_tng_orders")||[],i=20;return n.indexOf(t.id)>-1||(n.unshift(t.id),n.slice(0,Math.min(n.length,i)),e.utils.storage.setLS("latest_tng_orders",n),!1)},n=function(t,n){for(var i=0;i<e.state.activatedPlugins.length;i++){var o=function(i){return function(){e.state.activatedPlugins[i][t](n)}}(i);e.state.activatedPlugins[i].isReady()||"activate"===t?o():(e.mailBox[i]||(e.mailBox[i]=[]),e.mailBox[i].push(o))}},i=function(t,i){var o=function(){var e=t();if(!e||!e.items||!e.items.length)return console.error("Wrong order data format, please check Tangiblee Documentation"),!1;e.total=0;for(var n=0;n<e.items.length;n++)e.total+=e.items[n].price*e.items[n].qty;return 0===e.total?(console.warn("Order Total is 0, please check Tangiblee Documentation"),!1):e};if(e.utils.pageChecker.isParseRevenuePage()){var a=o();a&&e.utils.storage.setLS("tng_order",a)}if(e.utils.pageChecker.isTrackRevenuePage()){var a=o();a||(a=e.utils.storage.getLS("tng_order"),i&&(a.id=i()||!1)),a&&(n("trackOrder",a),e.utils.storage.removeLS("tng_order"))}},o={setAnalyticsPlugin:function(t,n){if(e.config.isUserInitialized||(a(),e.utils.transferCookies(),e.config.isUserInitialized=!0),n._unique_id)for(var i=0;i<e.state.activatedPlugins.length;i++)if(e.state.activatedPlugins[i]._unique_id===n._unique_id)return;e.state.activatedPlugins.push(e.state.plugins[t](n,e.state.activatedPlugins.length))},setVariation:function(t){e.config.variation=t,e.config.variationGA4=t},getVariation:function(){return e.config.variation},setExperiment:function(e){e.provider||(e.provider="GoogleOptimize"),n("setExperiment",e)},setRetailer:function(t){e.config.retailer=t},setEmbedState:function(t){
e.config.isEmbed=t},setProduct:function(t){e.config.product={id:t.id,category:t.category||"Default",categoryId:t.categoryId||-1,label:t.id?t.id:"Unknown"}},setCookieUserKey:function(t){e.config.cookieUserKey=t},setCurrentServerTime:function(t){var n=new Date-Date.parse(t);e.state.timeDelta=n},setAutoTracking:function(t){e.config.parseOn=t.parseOn,e.config.trackOn=t.trackOn,i(t.parseOrder,t.transactionIdFetcher)},getTangibleeUserId:function(t){var n=500,i=0,o=function(){if(e.state.userId){var o=e.state.userId,a=e.state.sessionId,r="",s=e.state.sessionCount,c=e.state.sessionEngaged,l=document.referrer?document.referrer:"",u=document.URL?document.URL:"";return r=e.config.useAnalyticsCookies&&o.split(";").length>1?o.split(";")[1]:o.split(";")[0],t(o,a,r,s,c,l,u),o}n>i&&(setTimeout(waitForUserId,50),i++)};o()},startRegisteringSession:function(){},stopRegisteringSession:function(){},onCheckoutCompleted:function(t){e.utils.onCheckoutCompleted(t)},trackOrder:function(i){if(n("trackCustomEvent",{category:"Tangiblee Experience",action:"TYP visit",label:e.state.currentPage,value:1,isInteraction:!1,tngGAOnly:!0}),!i||!i.items||!i.items.length)return console.log("Wrong order data format, please check Tangiblee Documentation"),!1;if(i.total=0,t(i))return console.log("Duplicated order was not sent"),!1;for(var o=0;o<i.items.length;o++)i.total+=i.items[o].price*i.items[o].qty;return 0===i.total?(console.warn("Order Total is 0, please check Tangiblee Documentation"),!1):void n("trackOrder",i)},activate:function(){a(),n("activate")},trackImpression:function(e){n("trackImpression",e)},trackATCClick:function(){n("trackATCClick")},trackATCWidgetClick:function(e,t){var i={atcTitle:e,variants:t};n("trackATCWidgetClick",i)},trackWidgetOpen:function(){n("trackWidgetOpen")},trackWidgetClose:function(){n("trackWidgetClose")},trackCustomEvent:function(e){n("trackCustomEvent",e)},trackWidgetEvent:function(e){n("trackWidgetEvent",e)},trackImpressionOnJewelryConfigurators:function(e){n("trackImpressionOnJewelryConfigurators",e)}},a=function(){var t=e.utils.storage.getCookie("_ga");if("function"==typeof tangiblee&&(e.config.useAnalyticsCookies=tangiblee("useAnalyticsCookies"),e.config.useCookies=tangiblee("useCookies")),!e.config.useAnalyticsCookies||!e.config.useCookies)return e.utils.setUserID(),void(t&&/GA\d+\.\d+\.(.+)/gi.test(t)&&(e.state.userId+=";"+/GA\d+\.\d+\.(.+)/gi.exec(t)[1]));var n=e.utils.storage.getLS("tangiblee:widget:user"),i=e.utils.storage.getCookie(e.config.cookieUserKey);e.state.userId=n,i&&i!==e.state.userId&&(e.state.userId=i);var o=window.crypto||window.msCrypto;if(e.state.userId)e.utils.storage.setLS("tangiblee:widget:user",e.state.userId),e.utils.storage.setCookie(e.config.cookieUserKey,e.state.userId,365);else if("undefined"!=typeof o&&o.getRandomValues){var a=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^o.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})};e.state.userId=a(),e.utils.storage.setLS("tangiblee:widget:user",e.state.userId),e.utils.storage.setCookie(e.config.cookieUserKey,e.state.userId,365)}else{var r=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})};e.state.userId=r(),e.utils.storage.setLS("tangiblee:widget:user",e.state.userId),e.utils.storage.setCookie(e.config.cookieUserKey,e.state.userId,365)}t&&/GA\d+\.\d+\.(.+)/gi.test(t)&&(e.state.userId+=";"+/GA\d+\.\d+\.(.+)/gi.exec(t)[1])},r=function(){if(!window.taScriptLoaded){window.taScriptLoaded=!0;var e=window.tangibleeAnalytics&&window.tangibleeAnalytics.q||[];window.tangibleeAnalytics=function(){try{for(var e=arguments[0],t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return o[e].apply(this,t)}catch(i){}},window.tangibleeAnalytics.loaded=!0;for(var t=!1,n=0;n<e.length;n++)"onCheckoutCompleted"===e[n][0]?t=e[n]:window.tangibleeAnalytics.apply(this,e[n]);t&&window.tangibleeAnalytics.apply(this,t)}};r()}()}()}catch(m){window.TrackJS&&window.TrackJS.isInstalled()&&window.TrackJS.track(m.message)}}();